import{a as j,b as K,c as W,d as q,e as G,f as J,g as Q,h as U,i as X,j as Y,k as ee,l as te,m as ie,n as ae,o as ne,p as re,q as oe,r as le,s as me,t as se,u as de,v as ce}from"./chunk-HRIUTT6J.js";import{b as Z}from"./chunk-ZLIFJTJT.js";import"./chunk-NXHIHCJN.js";import{B as R,C as N,y}from"./chunk-CSSOTJKK.js";import{a as P,b as V,e as O}from"./chunk-FF3Q3FET.js";import{w as F,x as z,z as H}from"./chunk-JNOJBTV6.js";import{G as $,H as B}from"./chunk-MDJVDLUZ.js";import{d as A,h as L,p as T}from"./chunk-VYZYS6JX.js";import{Ac as S,Eb as u,Fb as a,Gb as i,Hb as _,Lb as M,Mb as w,Ob as C,Vb as g,Wb as v,Ya as d,ec as D,gb as b,ic as l,jc as x,kc as k,ma as c,na as p,nb as E,rc as I,sb as h,xa as f}from"./chunk-CUARONR7.js";import"./chunk-FDERIQAA.js";var ue=()=>[10,25,50];function ge(t,e){if(t&1&&(a(0,"mat-option",27),l(1),i()),t&2){let n=e.$implicit;u("value",n),d(),k(" ",n," ")}}function fe(t,e){t&1&&(a(0,"th",28),l(1,"Nome"),i())}function he(t,e){if(t&1&&(a(0,"td",29),l(1),i()),t&2){let n=e.$implicit;d(),x(n.nome)}}function _e(t,e){t&1&&(a(0,"th",28),l(1,"Regi\xE3o"),i())}function Me(t,e){if(t&1&&(a(0,"td",29),l(1),i()),t&2){let n=e.$implicit;d(),x(n.regiao)}}function we(t,e){t&1&&(a(0,"th",30),l(1,"Refer\xEAncia"),i())}function Ce(t,e){if(t&1&&(a(0,"td",29),l(1),i()),t&2){let n=e.$implicit;d(),x(n.referencia)}}function xe(t,e){t&1&&_(0,"th",30)}function Se(t,e){if(t&1){let n=C();a(0,"td",31)(1,"button",32),g("click",function(m){let o=c(n).$implicit,s=v();return p(s.open(o,m))}),a(2,"mat-icon"),l(3,"open_in_new"),i()()()}}function ve(t,e){t&1&&_(0,"tr",33)}function De(t,e){if(t&1){let n=C();a(0,"tr",34),g("click",function(){let m=c(n).$implicit,o=v();return p(o.open(m))}),i()}}var pe=class t{constructor(e){this.router=e}cols=["nome","regiao","referencia","acoes"];armadilhas=f(Z);filtered=S(()=>this.armadilhas().filter(e=>{if(this.search()&&!`${e.nome} ${e.referencia} ${e.regiao}`.toLowerCase().includes(this.search())||this.regiao()&&e.regiao!==this.regiao())return!1;let n=new Date(e.createdAt+"T00:00:00");return!(this.dataInicio()&&n<this.dataInicio()||this.dataFim()&&n>this.dataFim())}));sort=f({active:"nome",direction:"asc"});pagedData=S(()=>{let e=this.pageIndex()*this.pageSize();return this.sorted().slice(e,e+this.pageSize())});search=f("");regiao=f(null);dataInicio=f(null);dataFim=f(null);sorted=S(()=>{let{active:e,direction:n}=this.sort();return n?[...this.filtered()].sort((r,m)=>{let o,s;switch(e){case"nome":o=r.nome,s=m.nome;break;case"regiao":o=r.regiao,s=m.regiao;break;default:return 0}return n==="asc"?o.localeCompare(s):s.localeCompare(o)}):this.filtered()});pageIndex=f(0);pageSize=f(10);regioes=["Centro","Zona Norte","Zona Sul","Zona Leste"];open(e,n){n?.stopPropagation(),this.router.navigate(["/workspace/entities/armadilhas",e.id])}goBack(){this.router.navigate(["/workspace"])}onSearch(e){this.search.set(e.target.value.toLowerCase()),this.pageIndex.set(0)}onRegiao(e){this.regiao.set(e||null),this.pageIndex.set(0)}onInicio(e){this.dataInicio.set(e),this.pageIndex.set(0)}onFim(e){this.dataFim.set(e),this.pageIndex.set(0)}onSort(e){this.sort.set(e),this.pageIndex.set(0)}onPage(e){this.pageIndex.set(e.pageIndex),this.pageSize.set(e.pageSize)}create(){this.router.navigate(["/workspace/entities/armadilhas/new"])}static \u0275fac=function(n){return new(n||t)(b(T))};static \u0275cmp=E({type:t,selectors:[["app-armadilhas-list"]],decls:55,vars:13,consts:[["ini",""],["fim",""],[1,"page"],["mat-button","",1,"back-btn",3,"click"],[1,"page-header"],[1,"header-left"],["mat-flat-button","","color","primary",3,"click"],[1,"filters"],["appearance","outline"],["matInput","",3,"input"],[3,"selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["matInput","",3,"dateChange","matDatepicker"],["matSuffix","",3,"for"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","nome"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","regiao"],["matColumnDef","referencia"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","acoes"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageIndex","pageSizeOptions"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"actions-cell"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,r){if(n&1){let m=C();a(0,"div",2)(1,"button",3),g("click",function(){return c(m),p(r.goBack())}),a(2,"mat-icon"),l(3,"arrow_back"),i(),l(4," Workspace "),i(),a(5,"div",4)(6,"div",5)(7,"h1"),l(8,"Armadilhas"),i()(),a(9,"button",6),g("click",function(){return c(m),p(r.create())}),a(10,"mat-icon"),l(11,"add"),i(),l(12," Nova armadilha "),i()(),a(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),l(16,"Buscar"),i(),a(17,"input",9),g("input",function(s){return c(m),p(r.onSearch(s))}),i()(),a(18,"mat-form-field",8)(19,"mat-label"),l(20,"Regi\xE3o"),i(),a(21,"mat-select",10),g("selectionChange",function(s){return c(m),p(r.onRegiao(s.value))}),a(22,"mat-option",11),l(23,"Todas"),i(),h(24,ge,2,2,"mat-option",12),i()(),a(25,"mat-form-field",8)(26,"mat-label"),l(27,"Criada a partir de"),i(),a(28,"input",13),g("dateChange",function(s){return c(m),p(r.onInicio(s.value))}),i(),_(29,"mat-datepicker-toggle",14)(30,"mat-datepicker",null,0),i(),a(32,"mat-form-field",8)(33,"mat-label"),l(34,"Criada at\xE9"),i(),a(35,"input",13),g("dateChange",function(s){return c(m),p(r.onFim(s.value))}),i(),_(36,"mat-datepicker-toggle",14)(37,"mat-datepicker",null,1),i()(),a(39,"table",15),g("matSortChange",function(s){return c(m),p(r.onSort(s))}),M(40,16),h(41,fe,2,0,"th",17)(42,he,2,1,"td",18),w(),M(43,19),h(44,_e,2,0,"th",17)(45,Me,2,1,"td",18),w(),M(46,20),h(47,we,2,0,"th",21)(48,Ce,2,1,"td",18),w(),M(49,22),h(50,xe,1,0,"th",21)(51,Se,4,0,"td",23),w(),h(52,ve,1,0,"tr",24)(53,De,1,0,"tr",25),i(),a(54,"mat-paginator",26),g("page",function(s){return c(m),p(r.onPage(s))}),i()()}if(n&2){let m=D(31),o=D(38);d(24),u("ngForOf",r.regioes),d(4),u("matDatepicker",m),d(),u("for",m),d(6),u("matDatepicker",o),d(),u("for",o),d(3),u("dataSource",r.pagedData()),d(13),u("matHeaderRowDef",r.cols),d(),u("matRowDefColumns",r.cols),d(),u("length",r.filtered().length)("pageSize",r.pageSize())("pageIndex",r.pageIndex())("pageSizeOptions",I(12,ue))}},dependencies:[L,A,ie,W,G,X,J,q,Y,Q,U,ee,te,K,j,O,P,V,H,z,F,B,$,ne,ae,N,R,y,ce,me,se,de,le,re,oe],styles:[".page[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin-right:auto;margin-left:auto}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:16px}.back-btn[_ngcontent-%COMP%]{min-width:auto;padding:0 8px;color:#555}.search[_ngcontent-%COMP%]{width:320px;margin-bottom:12px}table[_ngcontent-%COMP%]{width:100%;table-layout:fixed}td.mat-cell[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle}.filters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-bottom:16px}td.mat-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;padding-top:4px;padding-bottom:4px}.mat-column-acoes[_ngcontent-%COMP%]{width:48px;min-width:48px;max-width:48px;text-align:center}.mat-column-acoes[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto}tr.mat-row[_ngcontent-%COMP%], tr.mat-header-row[_ngcontent-%COMP%]{height:40px}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}"]})};export{pe as ArmadilhasList};
