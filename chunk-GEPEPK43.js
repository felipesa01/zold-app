import{A as xe,B as po,D as Re,E as De,F as Ft,G as Ie,H as mo,I as pe,J as fo,K as _o,L as go,M as vo,a as Yn,b as F,c as ee,d as Kn,e as Xn,f as eo,g as to,h as be,i as _i,j as io,k as no,l as oo,m as so,n as ro,o as ao,p as xt,q as lo,r as Me,s as co,t as Pe,u as ho,v as Rt,w as It,x as uo,y as kt,z as At}from"./chunk-D5QF6RMZ.js";import{J as mi,Q as Jn,R as fi}from"./chunk-D5LX53AO.js";import{B as $n,C as zn,a as hi,b as Cn,c as Tn,d as We,e as St,k as Fn,l as Nn,n as Mt,p as Ln,q as Bn,r as Gn,u as Pt,v as jn,w as Vn,x as Je,y as Hn}from"./chunk-ZIWPF6WV.js";import{h as ui,i as pi,w as Zn,x as Wn,z as Un}from"./chunk-7DR5YE7T.js";import{G as qn,H as Qn,a as On,b as En,c as Ct,d as Tt,e as Ue,f as Mn,h as qe,i as ae,j as Pn,l as xn,p as Rn,r as In,s as kn,v as An,w as Ot,x as Qe,z as Et}from"./chunk-CIYG3DD5.js";import{b as Sn}from"./chunk-DZ2YL2TU.js";import{f as vn,g as yn,h as wt,i as bn,j as Dn,o as wn}from"./chunk-7XFTMEP4.js";import{$b as vt,A as K,Ab as se,B as nn,Bb as re,Bc as _n,C as Be,Ca as ht,Cb as _e,Cc as ci,Da as ri,Db as ge,Ea as W,Eb as ve,Fb as E,Gb as h,Hb as u,I as P,Ib as $,Ic as Q,Ja as rn,Jb as pt,K as oi,Kb as mt,L as on,Lc as di,Mb as cn,Mc as gn,Nb as dn,Ob as hn,Oc as Ee,Pb as ye,Qb as ai,Tb as ft,Ub as un,V as ne,Vb as pn,W as Ge,Wb as O,X as x,Xa as an,Xb as k,Yb as _t,Z as dt,Za as _,Zb as gt,_ as si,_b as mn,a as Se,ac as ze,bb as S,bc as Ze,c as Le,ca as w,cb as H,da as b,db as he,eb as Te,f,fa as R,fb as Ve,g as J,ga as B,gb as ln,gc as yt,ha as d,hb as I,hc as q,i as Ki,ic as bt,j as Xi,jb as He,jc as p,ka as je,kc as A,l as ti,lc as ue,ma as ce,na as de,ob as T,p as Y,pb as D,q as ii,qa as C,qb as Oe,ra as oe,rc as Dt,sa as sn,sb as $e,t as ct,tb as j,uc as li,v as ie,vc as fn,w as ni,x as en,xa as G,xb as ut,y as Ce,z as tn,zb as X}from"./chunk-KF4UV7BN.js";import{a as L,b as we,e as lt}from"./chunk-FDERIQAA.js";var Rs=["*"];function Is(o,e){if(o&1){let t=ye();h(0,"button",7),O("click",function(){let n=ce(t).$implicit,s=k();return s.focus(),de(s.select(n.id,s.NgbSlideEventSource.INDICATOR))}),u()}if(o&2){let t=e.$implicit,i=k();q("active",t.id===i.activeId),X("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===i.activeId)}}function ks(o,e){}function As(o,e){if(o&1&&(h(0,"div",6)(1,"span",8),ft(2,0),u(),j(3,ks,0,0,"ng-template",9),u()),o&2){let t=e.$implicit,i=e.$index,n=e.$count;E("id","slide-"+t.id),_(2),un(i+1)(n),pn(2),_(),E("ngTemplateOutlet",t.templateRef)}}function Fs(o,e){if(o&1){let t=ye();h(0,"button",10),O("click",function(){ce(t);let n=k();return de(n.arrowLeft())}),$(1,"span",11),h(2,"span",12),ft(3,1),u()(),h(4,"button",13),O("click",function(){ce(t);let n=k();return de(n.arrowRight())}),$(5,"span",14),h(6,"span",12),ft(7,2),u()()}if(o&2){let t=k();X("aria-labelledby",t.id+"-previous"),_(2),E("id",t.id+"-previous"),_(2),X("aria-labelledby",t.id+"-next"),_(2),E("id",t.id+"-next")}}var Ns=["dialog"];var yo={animation:!0,transitionTimerDelayMs:5},bo=(()=>{let e=class e{constructor(){this.animation=yo.animation}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();function Ls(o){let{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(o),i=parseFloat(e),n=parseFloat(t);return(i+n)*1e3}function Do(o){return typeof o=="string"}function yi(o){return o!=null}function Bs(o){return o&&o.then}function bi(o){return(o||document.body).getBoundingClientRect()}function Gs(o){return e=>new Le(t=>{let i=r=>o.run(()=>t.next(r)),n=r=>o.run(()=>t.error(r)),s=()=>o.run(()=>t.complete());return e.subscribe({next:i,error:n,complete:s})})}var js=()=>{},{transitionTimerDelayMs:Vs}=yo,Ye=new Map,le=(o,e,t,i)=>{let n=i.context||{},s=Ye.get(e);if(s)switch(i.runningTransition){case"continue":return Xi;case"stop":o.run(()=>s.transition$.complete()),n=Object.assign(s.context,n),Ye.delete(e)}let r=t(e,i.animation,n)||js;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return o.run(()=>r()),ti(void 0).pipe(Gs(o));let a=new f,l=new f,c=a.pipe(on(!0));Ye.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:n});let m=Ls(e);return o.runOutsideAngular(()=>{let v=ie(e,"transitionend").pipe(x(c),K(({target:M})=>M===e)),y=ni(m+Vs).pipe(x(c));nn(y,v,l).pipe(x(c)).subscribe(()=>{Ye.delete(e),o.run(()=>{r(),a.next(),a.complete()})})}),a.asObservable()},Hs=o=>{Ye.get(o)?.complete()};var wo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var So=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})(),$s=(()=>{let e=class e{constructor(){this._ngbConfig=d(bo),this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})(),ke=(function(o){return o.START="start",o.END="end",o})(ke||{}),Co=({classList:o})=>o.contains("carousel-item-start")||o.contains("carousel-item-end"),Di=o=>{o.remove("carousel-item-start","carousel-item-end")},Nt=o=>{Di(o),o.remove("carousel-item-prev","carousel-item-next")},zs=(o,e,{direction:t})=>{let{classList:i}=o;if(!e){Nt(i),i.add("active");return}return Co(o)?Di(i):(i.add("carousel-item-"+(t===ke.START?"next":"prev")),bi(o),i.add("carousel-item-"+t)),()=>{Nt(i),i.add("active")}},Zs=(o,e,{direction:t})=>{let{classList:i}=o;if(!e){Nt(i),i.remove("active");return}return Co(o)?Di(i):i.add("carousel-item-"+t),()=>{Nt(i),i.remove("active")}},Ws=0,Us=0,wi=(()=>{let e=class e{constructor(){this.templateRef=d(Te),this.id=`ngb-slide-${Ws++}`,this.slid=new S}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=Oe({type:e,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"}});let o=e;return o})(),To=(()=>{let e=class e{constructor(){this.NgbSlideEventSource=Ke,this._config=d($s),this._platformId=d(rn),this._ngZone=d(H),this._cd=d(Q),this._container=d(W),this._destroyRef=d(sn),this._injector=d(C),this._interval$=new J(this._config.interval),this._mouseHover$=new J(!1),this._focused$=new J(!1),this._pauseOnHover$=new J(this._config.pauseOnHover),this._pauseOnFocus$=new J(this._config.pauseOnFocus),this._pause$=new J(!1),this._wrap$=new J(this._config.wrap),this.id=`ngb-carousel-${Us++}`,this.animation=this._config.animation,this.keyboard=this._config.keyboard,this.showNavigationArrows=this._config.showNavigationArrows,this.showNavigationIndicators=this._config.showNavigationIndicators,this.slide=new S,this.slid=new S,this._transitionIds=null}set interval(i){this._interval$.next(i)}get interval(){return this._interval$.value}set wrap(i){this._wrap$.next(i)}get wrap(){return this._wrap$.value}set pauseOnHover(i){this._pauseOnHover$.next(i)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(i){this._pauseOnFocus$.next(i)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(i){this._mouseHover$.next(i)}get mouseHover(){return this._mouseHover$.value}set focused(i){this._focused$.next(i)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Ke.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Ke.ARROW_RIGHT)}ngAfterContentInit(){wn(this._platformId)&&this._ngZone.runOutsideAngular(()=>{let i=ii([this.slide.pipe(Y(n=>n.current),ne(this.activeId)),this._wrap$,this.slides.changes.pipe(ne(null))]).pipe(Y(([n,s])=>{let r=this.slides.toArray(),a=this._getSlideIdxById(n);return s?r.length>1:a<r.length-1}),oi());ii([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,i]).pipe(Y(([n,s,r,a,l,c,m])=>n||s&&r||a&&l||!m?0:c),oi(),Ge(n=>n>0?ni(n,n):tn),fi(this._destroyRef)).subscribe(()=>this._ngZone.run(()=>this.next(Ke.TIMER)))}),this.slides.changes.pipe(fi(this._destroyRef)).subscribe(()=>{this._transitionIds?.forEach(i=>Hs(this._getSlideElement(i))),this._transitionIds=null,this._cd.markForCheck(),he({mixedReadWrite:()=>{for(let{id:i}of this.slides){let n=this._getSlideElement(i);i===this.activeId?n.classList.add("active"):n.classList.remove("active")}}},{injector:this._injector})})}ngAfterContentChecked(){let i=this._getSlideById(this.activeId);this.activeId=i?i.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){let i=this._getSlideElement(this.activeId);i&&i.classList.add("active")}}select(i,n){this._cycleToSelected(i,this._getSlideEventDirection(this.activeId,i),n)}prev(i){this._cycleToSelected(this._getPrevSlide(this.activeId),ke.END,i)}next(i){this._cycleToSelected(this._getNextSlide(this.activeId),ke.START,i)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(i,n,s){let r=this._transitionIds;if(r&&(r[0]!==i||r[1]!==this.activeId))return;let a=this._getSlideById(i);if(a&&a.id!==this.activeId){this._transitionIds=[this.activeId,i],this.slide.emit({prev:this.activeId,current:a.id,direction:n,paused:this._pause$.value,source:s});let l={animation:this.animation,runningTransition:"stop",context:{direction:n}},c=[],m=this._getSlideById(this.activeId);if(m){let at=le(this._ngZone,this._getSlideElement(m.id),Zs,l);at.subscribe(()=>{m.slid.emit({isShown:!1,direction:n,source:s})}),c.push(at)}let v=this.activeId;this.activeId=a.id;let y=this._getSlideById(this.activeId),M=le(this._ngZone,this._getSlideElement(a.id),zs,l);M.subscribe(()=>{y?.slid.emit({isShown:!0,direction:n,source:s})}),c.push(M),Be(...c).pipe(P(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:v,current:a.id,direction:n,paused:this._pause$.value,source:s})})}this._cd.markForCheck()}_getSlideEventDirection(i,n){let s=this._getSlideIdxById(i),r=this._getSlideIdxById(n);return s>r?ke.END:ke.START}_getSlideById(i){return this.slides.find(n=>n.id===i)||null}_getSlideIdxById(i){let n=this._getSlideById(i);return n!=null?this.slides.toArray().indexOf(n):-1}_getNextSlide(i){let n=this.slides.toArray(),s=this._getSlideIdxById(i);return s===n.length-1?this.wrap?n[0].id:n[n.length-1].id:n[s+1].id}_getPrevSlide(i){let n=this.slides.toArray(),s=this._getSlideIdxById(i);return s===0?this.wrap?n[n.length-1].id:n[0].id:n[s-1].id}_getSlideElement(i){return this._container.nativeElement.querySelector(`#slide-${i}`)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=T({type:e,selectors:[["ngb-carousel"]],contentQueries:function(n,s,r){if(n&1&&mn(r,wi,4),n&2){let a;ze(a=Ze())&&(s.slides=a)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:2,hostBindings:function(n,s){n&1&&O("keydown.arrowLeft",function(){return s.keyboard&&s.arrowLeft()})("keydown.arrowRight",function(){return s.keyboard&&s.arrowRight()})("mouseenter",function(){return s.mouseHover=!0})("mouseleave",function(){return s.mouseHover=!1})("focusin",function(){return s.focused=!0})("focusout",function(){return s.focused=!1}),n&2&&yt("display","block")},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],decls:7,vars:3,consts:()=>{let i;i=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\uFFFD0\uFFFD"}:INTERPOLATION: of ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: `;let n;n=$localize`:@@ngb.carousel.previous:Previous`;let s;return s=$localize`:@@ngb.carousel.next:Next`,[i,n,s,["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active"],[1,"carousel-inner"],["role","tabpanel",1,"carousel-item",3,"id"],["type","button","data-bs-target","","role","tab",3,"click"],[1,"visually-hidden"],[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden",3,"id"],["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"]]},template:function(n,s){n&1&&(h(0,"div",3),ge(1,Is,1,5,"button",4,_e),u(),h(3,"div",5),ge(4,As,4,4,"div",6,_e),u(),se(6,Fs,8,4)),n&2&&(q("visually-hidden",!s.showNavigationIndicators),_(),ve(s.slides),_(3),ve(s.slides),_(2),re(s.showNavigationArrows?6:-1))},dependencies:[bn],encapsulation:2,changeDetection:0});let o=e;return o})(),Ke=(function(o){return o.TIMER="timer",o.ARROW_LEFT="arrowLeft",o.ARROW_RIGHT="arrowRight",o.INDICATOR="indicator",o})(Ke||{}),Bt=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})(),Oo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var Ka=(()=>{let o=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(o()||e()):!1})();var qs=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Eo(o){let e=Array.from(o.querySelectorAll(qs)).filter(t=>t.tabIndex!==-1);return[e[0],e[e.length-1]]}var Qs=(o,e,t,i=!1)=>{o.runOutsideAngular(()=>{let n=ie(e,"focusin").pipe(x(t),Y(s=>s.target));ie(e,"keydown").pipe(x(t),K(s=>s.key==="Tab"),si(n)).subscribe(([s,r])=>{let[a,l]=Eo(e);(r===a||r===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),r===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&ie(e,"click").pipe(x(t),si(n),Y(s=>s[1])).subscribe(s=>s.focus())})};var Xa=new Date(1882,10,12),el=new Date(2174,10,25);var tl=1e3*60*60*24;var Si=1080,Js=24*Si,Ys=12*Si+793,il=29*Js+Ys,nl=11*Si+204;var Mo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var Po=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})(),Ks=(()=>{let e=class e{constructor(){this._ngbConfig=d(bo),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0,this.role="dialog"}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})(),Ae=class{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}};var Xs=(()=>{let e=class e{constructor(){this._document=d(oe)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),n=this._document.body,s=n.style,{overflow:r,paddingRight:a}=s;if(i>0){let l=parseFloat(window.getComputedStyle(n).paddingRight);s.paddingRight=`${l+i}px`}return s.overflow="hidden",()=>{i>0&&(s.paddingRight=a),s.overflow=r}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})(),er=["animation","backdropClass"],tr=(()=>{let e=class e{constructor(){this._nativeElement=d(W).nativeElement,this._zone=d(H),this._injector=d(C),this._cdRef=d(Q)}ngOnInit(){he({mixedReadWrite:()=>le(this._zone,this._nativeElement,(i,n)=>{n&&bi(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})},{injector:this._injector})}hide(){return le(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}updateOptions(i){er.forEach(n=>{yi(i[n])&&(this[n]=i[n])}),this._cdRef.markForCheck()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=T({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(n,s){n&2&&(bt("modal-backdrop"+(s.backdropClass?" "+s.backdropClass:"")),q("show",!s.animation)("fade",s.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(n,s){},encapsulation:2});let o=e;return o})(),Lt=class{update(e){}close(e){}dismiss(e){}},gi=class{update(e){this._windowCmptRef.instance.updateOptions(e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._backdropCmptRef.instance.updateOptions(e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(x(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(x(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,i,n){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=n,this._closed=new f,this._dismissed=new f,this._hidden=new f,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,r)=>{this._resolve=s,this._reject=r}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let t=this._beforeDismiss();Bs(t)?t.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):t!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ti(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Be(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},vi=(function(o){return o[o.BACKDROP_CLICK=0]="BACKDROP_CLICK",o[o.ESC=1]="ESC",o})(vi||{}),ir=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","role","scrollable","size","windowClass","modalDialogClass"],nr=(()=>{let e=class e{constructor(){this._document=d(oe),this._elRef=d(W),this._zone=d(H),this._injector=d(C),this._cdRef=d(Q),this._closed$=new f,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.role="dialog",this.dismissEvent=new S,this.shown=new f,this.hidden=new f}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":Do(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,he({mixedReadWrite:()=>this._show()},{injector:this._injector})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,n={animation:this.animation,runningTransition:"stop"},s=le(this._zone,i,()=>i.classList.remove("show"),n),r=le(this._zone,this._dialogEl.nativeElement,()=>{},n),a=Be(s,r);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}updateOptions(i){ir.forEach(n=>{yi(i[n])&&(this[n]=i[n])}),this._cdRef.markForCheck()}_show(){let i={animation:this.animation,runningTransition:"continue"},n=le(this._zone,this._elRef.nativeElement,(r,a)=>{a&&bi(r),r.classList.add("show")},i),s=le(this._zone,this._dialogEl.nativeElement,()=>{},i);Be(n,s).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{ie(i,"keydown").pipe(x(this._closed$),K(s=>s.key==="Escape")).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(vi.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let n=!1;ie(this._dialogEl.nativeElement,"mousedown").pipe(x(this._closed$),dt(()=>n=!1),Ge(()=>ie(i,"mouseup").pipe(x(this._closed$),P(1))),K(({target:s})=>i===s)).subscribe(()=>{n=!0}),ie(i,"click").pipe(x(this._closed$)).subscribe(({target:s})=>{i===s&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!n&&this._zone.run(()=>this.dismiss(vi.BACKDROP_CLICK))),n=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let n=i.querySelector("[ngbAutofocus]"),s=Eo(i)[0];(n||s||i).focus()}}_restoreFocus(){let i=this._document.body,n=this._elWithFocus,s;n&&n.focus&&i.contains(n)?s=n:s=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&le(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=T({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(n,s){if(n&1&&vt(Ns,7),n&2){let r;ze(r=Ze())&&(s._dialogEl=r.first)}},hostAttrs:["tabindex","-1"],hostVars:8,hostBindings:function(n,s){n&2&&(X("aria-modal",!0)("aria-labelledby",s.ariaLabelledBy)("aria-describedby",s.ariaDescribedBy)("role",s.role),bt("modal d-block"+(s.windowClass?" "+s.windowClass:"")),q("fade",s.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",role:"role",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Rs,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(n,s){n&1&&(_t(),pt(0,"div",1,0)(2,"div",2),gt(3),mt()()),n&2&&bt("modal-dialog"+(s.size?" modal-"+s.size:"")+(s.centered?" modal-dialog-centered":"")+s.fullscreenClass+(s.scrollable?" modal-dialog-scrollable":"")+(s.modalDialogClass?" "+s.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let o=e;return o})(),or=(()=>{let e=class e{constructor(){this._applicationRef=d(ut),this._injector=d(C),this._environmentInjector=d(je),this._document=d(oe),this._scrollBar=d(Xs),this._activeWindowCmptHasChanged=new f,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new S;let i=d(H);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let n=this._windowCmpts[this._windowCmpts.length-1];Qs(i,n.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(n.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,n,s){let r=s.container instanceof HTMLElement?s.container:yi(s.container)?this._document.querySelector(s.container):this._document.body;if(!r)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new Lt;i=s.injector||i;let l=i.get(je,null)||this._environmentInjector,c=this._getContentRef(i,l,n,a,s),m=s.backdrop!==!1?this._attachBackdrop(r):void 0,v=this._attachWindowComponent(r,c.nodes),y=new gi(v,c,m,s.beforeDismiss);return this._registerModalRef(y),this._registerWindowCmpt(v),y.hidden.pipe(P(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=M=>{y.close(M)},a.dismiss=M=>{y.dismiss(M)},a.update=M=>{y.update(M)},y.update(s),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),m&&m.instance&&m.changeDetectorRef.detectChanges(),v.changeDetectorRef.detectChanges(),y}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(n=>n.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let n=Ee(tr,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(n.hostView),i.appendChild(n.location.nativeElement),n}_attachWindowComponent(i,n){let s=Ee(nr,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:n});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_getContentRef(i,n,s,r,a){return s?s instanceof Te?this._createFromTemplateRef(s,r):Do(s)?this._createFromString(s):this._createFromComponent(i,n,s,r,a):new Ae([])}_createFromTemplateRef(i,n){let s={$implicit:n,close(a){n.close(a)},dismiss(a){n.dismiss(a)}},r=i.createEmbeddedView(s);return this._applicationRef.attachView(r),new Ae([r.rootNodes],r)}_createFromString(i){let n=this._document.createTextNode(`${i}`);return new Ae([[n]])}_createFromComponent(i,n,s,r,a){let l=C.create({providers:[{provide:Lt,useValue:r}],parent:i}),c=Ee(s,{environmentInjector:n,elementInjector:l}),m=c.location.nativeElement;return a.scrollable&&m.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new Ae([[m]],c.hostView,c)}_setAriaHidden(i){let n=i.parentElement;n&&i!==this._document.body&&(Array.from(n.children).forEach(s=>{s!==i&&s.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(n))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,n)=>{i?n.setAttribute("aria-hidden",i):n.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let n=()=>{let s=this._modalRefs.indexOf(i);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(n,n)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let n=this._windowCmpts.indexOf(i);n>-1&&(this._windowCmpts.splice(n,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})(),sr=(()=>{let e=class e{constructor(){this._injector=d(C),this._modalStack=d(or),this._config=d(Ks)}open(i,n={}){let s=L(we(L({},this._config),{animation:this._config.animation}),n);return this._modalStack.open(this._injector,i,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})(),xo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({providers:[sr]});let o=e;return o})();var Ro=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var Io=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var ko=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var Ao=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var Fo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var No=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var Lo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var Bo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var Go=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var jo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})();var Vo=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({});let o=e;return o})(),rr=[wo,So,Bt,Oo,Mo,Po,xo,Ro,Vo,Io,ko,Ao,Fo,No,Lo,Bo,Go,jo],ol=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=D({type:e}),e.\u0275inj=b({imports:[rr,wo,So,Bt,Oo,Mo,Po,xo,Ro,Vo,Io,ko,Ao,Fo,No,Lo,Bo,Go,jo]});let o=e;return o})();var Gt=class o{constructor(e){this.breakpointObserver=e;this.breakpointObserver.observe([ui.XSmall,ui.Small]).pipe(Y(t=>t.matches)).subscribe(t=>this.smallScreen.set(t))}smallScreen=G(!1);isSmallScreen=this.smallScreen.asReadonly();static \u0275fac=function(t){return new(t||o)(B(Rn))};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ci=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Pe,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?ee(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=ee(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return F()}readFeature(e,t){return F()}readFeatures(e,t){return F()}readGeometry(e,t){return F()}readProjection(e){return F()}writeFeature(e,t){return F()}writeFeatures(e,t){return F()}writeGeometry(e,t){return F()}},Ho=Ci;function jt(o,e,t){let i=t?ee(t.featureProjection):null,n=t?ee(t.dataProjection):null,s=o;if(i&&n&&!Xn(i,n)){e&&(s=o.clone());let r=e?i:n,a=e?n:i;r.getUnits()==="tile-pixels"?s.transform(r,a):s.applyTransform(eo(r,a))}if(e&&t&&t.decimals!==void 0){let r=Math.pow(10,t.decimals),a=function(l){for(let c=0,m=l.length;c<m;++c)l[c]=Math.round(l[c]*r)/r;return l};s===o&&(s=o.clone()),s.applyTransform(a)}return s}var lr={Point:no,LineString:Rt,Polygon:xt,MultiPoint:uo,MultiLineString:It,MultiPolygon:kt};function cr(o,e,t){return Array.isArray(e[0])?(so(o,0,e,t)||(o=o.slice(),ao(o,0,e,t)),o):(oo(o,0,e,t)||(o=o.slice(),ro(o,0,e,t)),o)}function Ti(o,e){let t=o.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>Ti(we(L({},o),{geometry:s}))).flat();let i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);let n=t.layout.length;return jt(new At(i,i==="Polygon"?cr(t.flatCoordinates,t.ends,n):t.flatCoordinates,t.ends?.flat(),n,o.properties||{},o.id).enableSimplifyTransformed(),!1,e)}function Vt(o,e){if(!o)return null;if(Array.isArray(o)){let i=o.map(n=>Vt(n,e));return new ho(i)}let t=lr[o.type];return jt(new t(o.flatCoordinates,o.layout||"XY",o.ends),!1,e)}var Oi=class extends Ho{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Ht(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Ht(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return F()}readFeaturesFromObject(e,t){return F()}readGeometry(e,t){return this.readGeometryFromObject(Ht(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return F()}readProjection(e){return this.readProjectionFromObject(Ht(e))}readProjectionFromObject(e){return F()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return F()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return F()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return F()}};function Ht(o){if(typeof o=="string"){let e=JSON.parse(o);return e||null}return o!==null?o:null}var $o=Oi;var Ei=class extends $o{constructor(e){e=e||{},super(),this.dataProjection=ee(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=ee(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};let n=Pi(i.geometry,t);if(this.featureClass===At)return Ti({geometry:n,id:i.id,properties:i.properties},t);let s=new Pe;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry(Vt(n,t)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){let i=e,n=null;if(i.type==="FeatureCollection"){let s=e;n=[];let r=s.features;for(let a=0,l=r.length;a<l;++a){let c=this.readFeatureFromObject(r[a],t);c&&n.push(c)}}else n=[this.readFeatureFromObject(e,t)];return n.flat()}readGeometryFromObject(e,t){return dr(e,t)}readProjectionFromObject(e){let t=e.crs,i;if(t)if(t.type=="name")i=ee(t.properties.name);else if(t.type==="EPSG")i=ee("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);let i={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(i.id=n),!e.hasProperties())return i;let s=e.getProperties(),r=e.getGeometry();return r&&(i.geometry=Mi(r,t),delete s[e.getGeometryName()]),Yn(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);let i=[];for(let n=0,s=e.length;n<s;++n)i.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return Mi(e,this.adaptOptions(t))}};function Pi(o,e){if(!o)return null;let t;switch(o.type){case"Point":{t=ur(o);break}case"LineString":{t=pr(o);break}case"Polygon":{t=gr(o);break}case"MultiPoint":{t=fr(o);break}case"MultiLineString":{t=mr(o);break}case"MultiPolygon":{t=_r(o);break}case"GeometryCollection":{t=hr(o);break}default:throw new Error("Unsupported GeoJSON type: "+o.type)}return t}function dr(o,e){let t=Pi(o,e);return Vt(t,e)}function hr(o,e){return o.geometries.map(function(i){return Pi(i,e)})}function ur(o){let e=o.coordinates;return{type:"Point",flatCoordinates:e,layout:be(e.length)}}function pr(o){let e=o.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:be(e[0]?.length||2)}}function mr(o){let e=o.coordinates,t=e[0]?.[0]?.length||2,i=[],n=_i(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:n,layout:be(t)}}function fr(o){let e=o.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:be(e[0]?.length||2)}}function _r(o){let e=o.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,n=io(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:n,layout:be(i)}}function gr(o){let e=o.coordinates,t=[],i=e[0]?.[0]?.length,n=_i(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:n,layout:be(i)}}function Mi(o,e){o=jt(o,!0,e);let t=o.getType(),i;switch(t){case"Point":{i=Sr(o,e);break}case"LineString":{i=yr(o,e);break}case"Polygon":{i=Cr(o,e);break}case"MultiPoint":{i=Dr(o,e);break}case"MultiLineString":{i=br(o,e);break}case"MultiPolygon":{i=wr(o,e);break}case"GeometryCollection":{i=vr(o,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function vr(o,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:o.getGeometriesArray().map(function(i){return Mi(i,e)})}}function yr(o,e){return{type:"LineString",coordinates:o.getCoordinates()}}function br(o,e){return{type:"MultiLineString",coordinates:o.getCoordinates()}}function Dr(o,e){return{type:"MultiPoint",coordinates:o.getCoordinates()}}function wr(o,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:o.getCoordinates(t)}}function Sr(o,e){return{type:"Point",coordinates:o.getCoordinates()}}function Cr(o,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:o.getCoordinates(t)}}var xi=Ei;var $t=class o{constructor(e){this.http=e;this.http.get("assets/vetores/fases.json").pipe(P(1)).subscribe(t=>{let i=new xi({dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).readFeatures(t);this.fasesLayer.setSource(new xe({features:i}));let n={name:"Fases",id:1};this.fasesLayer.setProperties(n),this.fasesLayer.setStyle(this.styleFases)}),this.http.get("assets/vetores/arvores.json").pipe(P(1)).subscribe(t=>{let i=new xi({dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).readFeatures(t);this.arvoresLayer.setSource(new xe({features:i}));let n={name:"\xC1rvores",id:2};this.arvoresLayer.setProperties(n),this.arvoresLayer.setStyle(this.styleArvores)})}fasesLayer=new pe;arvoresLayer=new pe;zoomToResolution4326(e){return 360/(256*Math.pow(2,e))}styleFases=(e,t)=>{let i=e.get("nome"),n=t>=this.zoomToResolution4326(20);return new Ie({stroke:new De({color:"#ca980eff",width:2}),fill:new Re({color:"rgba(0,0,0,0)"}),text:n?new mo({text:i||"",font:"bold 15px sans-serif",fill:new Re({color:"#000000ff"}),stroke:new De({color:"#ca980eff",width:3}),placement:"point",textAlign:"center"}):void 0})};styleArvores=(e,t)=>{let i=e.get("nome"),n=t>=this.zoomToResolution4326(20);return new Ie({image:new Ft({radius:10,stroke:new De({color:"#ffffffff",width:3}),fill:new Re({color:"rgba(38, 182, 33, 0.7)"})})})};higthlihtOptionToInfo={polygon:new pe({source:new xe({}),properties:{name:"highlihtOptionToInfoPol",id:"HLOptiontoInfoPol"},style:new Ie({stroke:new De({color:"#fd2929",width:3}),fill:new Re({color:"rgba(209, 30, 48, 0.3)"})}),zIndex:99999}),line:new pe({source:new xe({}),properties:{name:"highlihtOptiontoInfoLin",id:"HLOptiontoInfoLin"},style:new Ie({stroke:new De({color:"#fd2929",width:2})}),zIndex:99999}),point:new pe({source:new xe({}),properties:{name:"highlihtOptiontoInfoPt",id:"HLOptiontoInfoPt"},style:new Ie({image:new Ft({radius:10,fill:new Re({color:"rgba(209, 30, 48, 0.5)"}),stroke:new De({color:"red",width:2})})}),zIndex:99999})};tileSources=[new Me({source:new po,properties:{name:"OSM",imgThumb:".assets/images/tileThumbs/osm.png",categoria:"OSM"}}),new Me({source:new co({url:"http://mt0.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}",attributions:"\xA9 Google"})})];static \u0275fac=function(t){return new(t||o)(B(Sn))};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})};function Or(o,e){}var me=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var Ii=(()=>{class o extends Tn{_elementRef=d(W);_focusTrapFactory=d(kn);_config;_interactivityChecker=d(In);_ngZone=d(H);_focusMonitor=d(Pn);_renderer=d(ln);_changeDetectorRef=d(Q);_injector=d(C);_platform=d(Mn);_document=d(oe);_portalOutlet;_focusTrapped=new f;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=d(me,{optional:!0})||new me,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let i=this._ariaLabelledByQueue.indexOf(t);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}attachDomPortal=t=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let n=()=>{s(),r(),t.removeAttribute("tabindex")},s=this._renderer.listen(t,"blur",n),r=this._renderer.listen(t,"mousedown",n)})),t.focus(i)}_focusByCssSelector(t,i){let n=this._elementRef.nativeElement.querySelector(t);n&&this._forceFocus(n,i)}_trapFocus(t){this._isDestroyed||he(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus(t);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(t)||this._focusDialogContainer(t);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',t);break;default:this._focusByCssSelector(this._config.autoFocus,t);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,i=null;if(typeof t=="string"?i=this._document.querySelector(t):typeof t=="boolean"?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&typeof i.focus=="function"){let n=Tt(),s=this._elementRef.nativeElement;(!n||n===this._document.body||n===s||s.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(t){this._elementRef.nativeElement.focus?.(t)}_containsFocus(){let t=this._elementRef.nativeElement,i=Tt();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Tt()))}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=T({type:o,selectors:[["cdk-dialog-container"]],viewQuery:function(i,n){if(i&1&&vt(We,7),i&2){let s;ze(s=Ze())&&(n._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,n){i&2&&X("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[$e],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,n){i&1&&j(0,Or,0,0,"ng-template",0)},dependencies:[We],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return o})(),Xe=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new f;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,t){this.overlayRef=e,this.config=t,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Ot(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=e.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(e,t){if(this._canClose(e)){let i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}_canClose(e){let t=this.config;return!!this.containerInstance&&(!t.closePredicate||t.closePredicate(e,t,this.componentInstance))}},Er=new R("DialogScrollStrategy",{providedIn:"root",factory:()=>{let o=d(C);return()=>Mt(o)}}),Mr=new R("DialogData"),Pr=new R("DefaultDialogConfig");function xr(o){let e=G(o),t=new S;return{valueSignal:e,get value(){return e()},change:t,ngOnDestroy(){t.complete()}}}var ki=(()=>{class o{_injector=d(C);_defaultOptions=d(Pr,{optional:!0});_parentDialog=d(o,{optional:!0,skipSelf:!0});_overlayContainer=d(Bn);_idGenerator=d(Et);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new f;_afterOpenedAtThisLevel=new f;_ariaHiddenElements=new Map;_scrollStrategy=d(Er);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=ct(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ne(void 0)));constructor(){}open(t,i){let n=this._defaultOptions||new me;i=L(L({},n),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let s=this._getOverlayConfig(i),r=jn(this._injector,s),a=new Xe(r,i),l=this._attachContainer(r,a,i);if(a.containerInstance=l,!this.openDialogs.length){let c=this._overlayContainer.getContainerElement();l._focusTrapped?l._focusTrapped.pipe(P(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(c)}):this._hideNonDialogContentFromAssistiveTechnology(c)}return this._attachDialogContent(t,a,l,i),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){Ri(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){Ri(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),Ri(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let i=new Ln({positionStrategy:t.positionStrategy||Pt().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation,disableAnimations:t.disableAnimations});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,n){let s=n.injector||n.viewContainerRef?.injector,r=[{provide:me,useValue:n},{provide:Xe,useValue:i},{provide:Gn,useValue:t}],a;n.container?typeof n.container=="function"?a=n.container:(a=n.container.type,r.push(...n.container.providers(n))):a=Ii;let l=new hi(a,n.viewContainerRef,C.create({parent:s||this._injector,providers:r}));return t.attach(l).instance}_attachDialogContent(t,i,n,s){if(t instanceof Te){let r=this._createInjector(s,i,n,void 0),a={$implicit:s.data,dialogRef:i};s.templateContext&&(a=L(L({},a),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),n.attachTemplatePortal(new Cn(t,null,a,r))}else{let r=this._createInjector(s,i,n,this._injector),a=n.attachComponentPortal(new hi(t,s.viewContainerRef,r));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,n,s){let r=t.injector||t.viewContainerRef?.injector,a=[{provide:Mr,useValue:t.data},{provide:Xe,useValue:i}];return t.providers&&(typeof t.providers=="function"?a.push(...t.providers(i,t,n)):a.push(...t.providers)),t.direction&&(!r||!r.get(Qe,null,{optional:!0}))&&a.push({provide:Qe,useValue:xr(t.direction)}),C.create({parent:r||s,providers:a})}_removeOpenDialog(t,i){let n=this.openDialogs.indexOf(t);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,r)=>{s?r.setAttribute("aria-hidden",s):r.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(t){if(t.parentElement){let i=t.parentElement.children;for(let n=i.length-1;n>-1;n--){let s=i[n];s!==t&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||o)};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function Ri(o,e){let t=o.length;for(;t--;)e(o[t])}var Ai=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=D({type:o});static \u0275inj=b({providers:[ki],imports:[Je,St,An,St]})}return o})();function Rr(o,e){}var te=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},Fi="mdc-dialog--open",Zo="mdc-dialog--opening",Wo="mdc-dialog--closing",Ir=150,kr=75,Qo=(()=>{class o extends Ii{_animationStateChanged=new S;_animationsEnabled=!pi();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?qo(this._config.enterAnimationDuration)??Ir:0;_exitAnimationDuration=this._animationsEnabled?qo(this._config.exitAnimationDuration)??kr:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Uo,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Zo,Fi)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Fi),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Fi),this._animationsEnabled?(this._hostElement.style.setProperty(Uo,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Wo)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Zo,Wo)}_waitForAnimationToComplete(t,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let t;return function(n){return(t||(t=ri(o)))(n||o)}})();static \u0275cmp=T({type:o,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,n){i&2&&(ai("id",n._config.id),X("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),q("_mat-animation-noopable",!n._animationsEnabled)("mat-mdc-dialog-container-with-actions",n._actionSectionCount>0))},features:[$e],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,n){i&1&&(h(0,"div",0)(1,"div",1),j(2,Rr,0,0,"ng-template",2),u()())},dependencies:[We],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return o})(),Uo="--mat-dialog-transition-duration";function qo(o){return o==null?null:typeof o=="number"?o:o.endsWith("ms")?qe(o.substring(0,o.length-2)):o.endsWith("s")?qe(o.substring(0,o.length-1))*1e3:o==="0"?0:null}var et=(function(o){return o[o.OPEN=0]="OPEN",o[o.CLOSING=1]="CLOSING",o[o.CLOSED=2]="CLOSED",o})(et||{}),V=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new f;_beforeClosed=new f;_result;_closeFallbackTimeout;_state=et.OPEN;_closeInteractionType;constructor(e,t,i){this._ref=e,this._config=t,this._containerInstance=i,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(K(n=>n.state==="opened"),P(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(K(n=>n.state==="closed"),P(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ce(this.backdropClick(),this.keydownEvents().pipe(K(n=>n.keyCode===27&&!this.disableClose&&!Ot(n)))).subscribe(n=>{this.disableClose||(n.preventDefault(),Jo(this,n.type==="keydown"?"keyboard":"mouse"))})}close(e){let t=this._config.closePredicate;t&&!t(e,this._config,this.componentInstance)||(this._result=e,this._containerInstance._animationStateChanged.pipe(K(i=>i.state==="closing"),P(1)).subscribe(i=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),i.totalTime+100)}),this._state=et.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=et.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function Jo(o,e,t){return o._closeInteractionType=e,o.close(t)}var fe=new R("MatMdcDialogData"),Yo=new R("mat-mdc-dialog-default-options"),Ko=new R("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let o=d(C);return()=>Mt(o)}}),tt=(()=>{class o{_defaultOptions=d(Yo,{optional:!0});_scrollStrategy=d(Ko);_parentDialog=d(o,{optional:!0,skipSelf:!0});_idGenerator=d(Et);_injector=d(C);_dialog=d(ki);_animationsDisabled=pi();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new f;_afterOpenedAtThisLevel=new f;dialogConfigClass=te;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=ct(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ne(void 0)));constructor(){this._dialogRefConstructor=V,this._dialogContainerType=Qo,this._dialogDataToken=fe}open(t,i){let n;i=L(L({},this._defaultOptions||new te),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(t,we(L({},i),{positionStrategy:Pt(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||i.enterAnimationDuration?.toLocaleString()==="0"||i.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:me,useValue:i}]},templateContext:()=>({dialogRef:n}),providers:(r,a,l)=>(n=new this._dialogRefConstructor(r,i,l),n.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:n}])}));return n.componentRef=s.componentRef,n.componentInstance=s.componentInstance,this.openDialogs.push(n),this.afterOpened.next(n),n.afterClosed().subscribe(()=>{let r=this.openDialogs.indexOf(n);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||this._getAfterAllClosed().next())}),n}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static \u0275fac=function(i){return new(i||o)};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var zt=class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=T({type:o,selectors:[["app-menu-on-click-component"]],decls:2,vars:0,template:function(t,i){t&1&&(pt(0,"p"),p(1,"menu-on-click-component works!"),mt())},encapsulation:2})};function Ar(o,e){o&1&&(cn(0),h(1,"div",1),$(2,"div",2),u(),dn())}var Wt=class o{constructor(e,t,i,n,s,r,a){this.dialog=e;this.data=t;this.mapService=i;this.overlay=n;this.viewContainerRef=s;this.menuOnClickDialog=r;this.cdref=a}isOpen=!1;layers=[];isLoading=!0;mainData;mainDataNew;dataToExport=[];ngOnInit(){this.getMappedMenu(this.data.mappedMenu)}openMenuFeatures(){let e=new te;e.maxHeight="0px",e.maxWidth="0px",e.disableClose=!1,e.hasBackdrop=!1,e.position={left:(this.data.left+10).toString()+"px",top:(this.data.top+10).toString()+"px"},e.data=this.dataToExport,this.mapService.openMenuOnClickComponent(e)}translateClusterMode(e){if(e){var t=e.split(":"),i=t[1].split(",").map(n=>Number(n));return{attr:t[0],clusterNumbers:i.sort().reverse()}}else return{attr:void 0,clusterNumbers:void 0}}sortItemFromMappingResultObject(e,t){return!e.item?.cluster_name&&!t.item?.cluster_name?0:e.item?.cluster_name>t.item?.cluster_name?1:e.item?.cluster_name<t.item?.cluster_name?-1:0}transformMainData(){if(this.mainDataNew=this.mainData.map(t=>({item:t,children:[]})),this.layers.map(t=>{var i=this.mainDataNew.filter(l=>l.item?.layerName===t);if(i.length>15){var n=this.translateClusterMode(i[0].item?.cluster_mode),s=i.filter(l=>!l.item?.cluster_name);if(i=i.filter(l=>l.item?.cluster_name),n.clusterNumbers){var r=[],a=[];n.clusterNumbers.map((l,c)=>{var m=[...new Set(i.map(v=>v.item?.cluster_name?.toString().slice(0,l)))].sort();m.map(v=>{var y;c===0&&i.length>0?(y=i.filter(M=>M.item?.cluster_name?.toString().startsWith(v)),y.sort(this.sortItemFromMappingResultObject),r.push({item:v,children:y})):(y=r.filter(M=>M.item.toString().startsWith(v)),a.push({item:v,children:y}))}),c+1===n.clusterNumbers?.length&&(s.length>0&&r.push({item:"Sem informa\xE7\xE3o",children:s}),n.clusterNumbers.length===1?this.dataToExport.push({item:t,children:r}):this.dataToExport.push({item:t,children:a}))})}}else this.dataToExport.push({item:t,children:i})}),this.dataToExport.length===1){var e=[];this.dataToExport[0].children.map(t=>{e.push(t)}),this.dataToExport=e}else this.dataToExport.length===0&&(this.dataToExport=this.mainDataNew)}doApelidoBetter(e){var t,i,n=e.split(":");return i=n.length===1?" - ":n[1],t=n[0].split("\\"),{values:t,sep:i}}getMappedMenu(e){var t=[];e.length>0?(e.map(i=>{if(i){let n=this.mapService.findLayerOfFeature(i);t.push({layerId:n?.get("id"),layerName:n?.get("name"),fonteGS_front:n?.get("fonteGS_front"),fonteGS_back:n?.get("fonteGS_back"),pk_name:n?.get("pk_name"),pk_value:i.get(n?.get("pk_name")),geomFeature:i,nameFeature:i.get(n?.get("feat_apelido")),cluster_mode:"",cluster_name:""})}}),this.mainData=t,this.layers=[...new Set(this.mainData.map(i=>i.layerName))],this.transformMainData(),this.mainData.length>1?(this.openMenuFeatures(),this.isLoading=!1,this.closeMyMenu()):this.mainData.length==1?(this.featureSelected(this.mainData[0]),this.isLoading=!1,this.closeMyMenu()):this.ngOnDestroy()):setTimeout(()=>{this.closeMyMenu()},500)}getItemsFromLayerName(e){var t=this.mainData.filter(i=>i.layerName===e);return t.sort(),t}ngAfterViewInit(){this.cdref.detectChanges()}featureSelected(e){this.mapService.openGeneralFeatureInfo(e)}isExpandable(e){var t=this.getItemsFromLayerName(e);return t.length>1}closeMyMenu(){this.mapService.clearHighligthAllFeature("higthlihtOptionToInfo"),this.mapService.closeOnClickComponent()}ngOnDestroy(){this.closeMyMenu()}static \u0275fac=function(t){return new(t||o)(I(tt),I(fe),I(Fe),I(Vn),I(He),I(V),I(Q))};static \u0275cmp=T({type:o,selectors:[["app-on-click-component"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"d-flex","justify-content-center","p-1"],["role","status",1,"spinner-border","text-primary","spinner-border-sm",2,"margin","0px 4px"]],template:function(t,i){t&1&&j(0,Ar,3,0,"ng-container",0),t&2&&E("ngIf",i.isLoading)},dependencies:[Je,Ai,wt],encapsulation:2})};mi.register(...Jn);var es=mi;function Fr(o,e){if(o&1&&(h(0,"mat-option",20),p(1),li(2,"date"),u()),o&2){let t=e.$implicit;E("value",t),_(),ue(" ",fn(2,2,t.data,"dd/MM/yyyy")," ")}}function Nr(o,e){if(o&1&&(h(0,"div",4)(1,"div",5),p(2,"DAP:"),u(),h(3,"div",6),p(4),u(),h(5,"div",5),p(6,"Altura:"),u(),h(7,"div",6),p(8),u(),h(9,"div",5),p(10,"Status Copa:"),u(),h(11,"div",6),p(12),u(),h(13,"div",5),p(14,"Status Tronco:"),u(),h(15,"div",6),p(16),u(),h(17,"div",5),p(18,"Status Radicular:"),u(),h(19,"div",6),p(20),u(),h(21,"div",5),p(22,"Pragas:"),u(),h(23,"div",6),p(24),u(),h(25,"div",5),p(26,"Fungos:"),u(),h(27,"div",6),p(28),u(),h(29,"div",5),p(30,"Bact\xE9rias:"),u(),h(31,"div",6),p(32),u(),h(33,"div",5),p(34,"Defici\xEAncia Nutricional:"),u(),h(35,"div",6),p(36),u()()),o&2){let t=e.ngIf;_(4),ue("",t.dap," cm"),_(4),ue("",t.altura," m"),_(4),A(t.status_copa),_(4),A(t.status_tronco),_(4),A(t.status_radicular),_(4),A(t.pragas.sim?"Sim - "+t.pragas.desc:"N\xE3o"),_(4),A(t.fungos.sim?"Sim - "+t.fungos.desc:"N\xE3o"),_(4),A(t.bacterias.sim?"Sim - "+t.bacterias.desc:"N\xE3o"),_(4),A(t.def_nutricional.sim?"Sim - "+t.def_nutricional.desc:"N\xE3o")}}function Lr(o,e){if(o&1&&(h(0,"div",24),$(1,"img",25),u(),h(2,"div",26)(3,"h3"),p(4,"Foto X"),u()()),o&2){let t=k().$implicit;_(),E("src",t,an)}}function Br(o,e){o&1&&j(0,Lr,5,1,"ng-template",23)}function Gr(o,e){if(o&1){let t=ye();h(0,"section",3)(1,"div",21)(2,"button",22),O("click",function(){ce(t);let n=k();return de(n.togglePhotos())}),p(3,"\u2715"),u(),h(4,"ngb-carousel"),ge(5,Br,1,0,null,23,_e),u()()()}if(o&2){let t,i=k();_(5),ve((t=i.selectedAvaliacao())==null?null:t.fotos)}}var Ut=class o{constructor(e,t){this.data=e;this.dialogRef=t;let i=e.avaliacoes[e.avaliacoes.length-1];this.selectedAvaliacao.set(i),ci(()=>{this.selectedHistoryField()&&setTimeout(()=>this.renderChart(),200)}),ci(()=>{this.showHistory()&&setTimeout(()=>this.updateChart(),100)})}showHistory=G(!0);showPhotos=G(!1);selectedHistoryField=G("dap");selectedAvaliacao=G(null);chart=null;ngAfterViewInit(){this.setSelectedHistoryField("dap")}setSelectedAvaliacao(e){this.selectedAvaliacao.set(e)}setSelectedHistoryField(e){this.selectedHistoryField.set(e),this.updateChart()}toggleHistory(){this.showHistory.set(!this.showHistory())}togglePhotos(){this.showPhotos.set(!this.showPhotos())}close(){this.dialogRef.close()}booleanFields=["pragas","fungos","bacterias","def_nutricional"];renderChart(){let e=document.getElementById("historicChart");if(!e)return;let t=this.selectedHistoryField(),i=this.booleanFields.includes(t),n=this.data.avaliacoes.map(a=>new Date(a.data).toLocaleDateString()),s=this.data.avaliacoes.map(a=>i?a[t].sim?1:0:a[t]),r=this.data.avaliacoes.map(a=>i?a[t].sim?a[t].desc:"N\xE3o":"");this.chart&&this.chart.destroy(),this.chart=new es(e,{type:i?"scatter":"line",data:{labels:n,datasets:[{label:t,data:s.map((a,l)=>({x:l,y:a})),borderWidth:i?0:3,pointRadius:i?8:5,pointBackgroundColor:i?a=>a.raw.y===1?"#e53935":"#43a047":"#1976d2",showLine:!i,tension:i?0:.3}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{callbacks:{label:a=>{let l=a.dataIndex;return i?s[l]===1?`Sim \u2014 ${r[l]}`:"N\xE3o":`${s[l]}`}}}},scales:i?{x:{ticks:{callback:a=>n[a]}},y:{min:-.2,max:1.2,ticks:{callback:a=>a===1?"Sim":a===0?"N\xE3o":""}}}:{y:{beginAtZero:!0}}}})}updateChart(){if(!this.chart)return;let e=this.selectedHistoryField(),t=this.data.avaliacoes.map(i=>this.booleanFields.includes(e)?i[e].sim?1:0:i[e]);this.chart.data.datasets[0].data=t,this.chart.update()}static \u0275fac=function(t){return new(t||o)(I(fe),I(V))};static \u0275cmp=T({type:o,selectors:[["app-exemplar-info-component"]],decls:61,vars:11,consts:[[1,"modal-container"],[1,"header"],["mat-icon-button","",3,"click"],[1,"section"],[1,"info-grid"],[1,"label"],[1,"value"],[1,"select",3,"valueChange","value"],[3,"value",4,"ngFor","ngForOf"],[1,"section-header"],["class","info-grid",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"history-section"],["value","dap"],["value","altura"],["value","pragas"],["value","fungos"],["value","bacterias"],["value","def_nutricional"],["id","historicChart"],[3,"value"],[1,"photo-overlay"],[1,"photo-close",3,"click"],["ngbSlide",""],[1,"picsum-img-wrapper"],["alt","Random first slide",3,"src"],[1,"carousel-caption"]],template:function(t,i){if(t&1&&(h(0,"div",0)(1,"header",1)(2,"h2"),p(3),u(),h(4,"button",2),O("click",function(){return i.close()}),h(5,"mat-icon"),p(6,"close"),u()()(),h(7,"section",3)(8,"h3"),p(9,"Informa\xE7\xF5es do Exemplar"),u(),h(10,"div",4)(11,"div",5),p(12,"Nome Cient\xEDfico:"),u(),h(13,"div",6),p(14),u(),h(15,"div",5),p(16,"Nome Comum:"),u(),h(17,"div",6),p(18),u(),h(19,"div",5),p(20,"Endere\xE7o:"),u(),h(21,"div",6),p(22),u(),h(23,"div",5),p(24,"Origem da Esp\xE9cie:"),u(),h(25,"div",6),p(26),u(),h(27,"div",5),p(28,"Flora\xE7\xE3o:"),u(),h(29,"div",6),p(30),u()()(),h(31,"section",3)(32,"h3"),p(33,"Avalia\xE7\xE3o"),u(),h(34,"mat-select",7),O("valueChange",function(s){return i.setSelectedAvaliacao(s)}),j(35,Fr,3,5,"mat-option",8),u()(),h(36,"section",3)(37,"div",9)(38,"h3"),p(39,"Condi\xE7\xF5es na Data Selecionada"),u()(),j(40,Nr,37,9,"div",10),h(41,"button",11),O("click",function(){return i.togglePhotos()}),p(42,"Ver fotos"),u()(),se(43,Gr,7,0,"section",3),h(44,"section",12)(45,"h3"),p(46,"Hist\xF3rico de Avalia\xE7\xF5es"),u(),h(47,"mat-select",7),O("valueChange",function(s){return i.setSelectedHistoryField(s)}),h(48,"mat-option",13),p(49,"DAP"),u(),h(50,"mat-option",14),p(51,"Altura"),u(),h(52,"mat-option",15),p(53,"Ataque de Pragas"),u(),h(54,"mat-option",16),p(55,"Ataque de Fungos"),u(),h(56,"mat-option",17),p(57,"Ataque de Bact\xE9rias"),u(),h(58,"mat-option",18),p(59,"Def. Nutricional"),u()(),$(60,"canvas",19),u()()),t&2){let n;_(3),ue("Exemplar #",i.data.exemplar.gid),_(11),A(i.data.exemplar.nm_cientifico),_(4),A(i.data.exemplar.nm_comum),_(4),A(i.data.exemplar.endereco),_(4),A(i.data.exemplar.origem_esp),_(4),A(i.data.exemplar.floracao),_(4),E("value",i.selectedAvaliacao()),_(),E("ngForOf",i.data.avaliacoes),_(5),E("ngIf",i.selectedAvaliacao()),_(3),re(i.showPhotos()&&((n=i.selectedAvaliacao())!=null&&n.fotos)?43:-1),_(4),E("value",i.selectedHistoryField())}},dependencies:[zn,$n,Hn,Un,Wn,Zn,Qn,qn,yn,wt,Bt,To,wi,Dn],styles:[".modal-container[_ngcontent-%COMP%]{width:92vw;max-width:480px;max-height:90vh;overflow-y:auto;background:var(--md-sys-color-surface, #ffffff);color:var(--md-sys-color-on-surface, #111827);border-radius:20px;padding:18px;box-shadow:0 12px 30px #0c121f1f;display:flex;flex-direction:column;gap:22px;font-family:Inter,Roboto,Helvetica Neue,Arial,sans-serif;position:relative}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--md-sys-color-on-surface, #0f1724)}.section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;font-weight:600;color:var(--md-sys-color-on-surface-variant, #0b1220)}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:110px 1fr;gap:8px 12px;align-items:center}.label[_ngcontent-%COMP%]{color:var(--md-sys-color-outline, #6b7280);font-weight:600;font-size:.88rem}.value[_ngcontent-%COMP%]{font-weight:700;font-size:.95rem;word-break:break-word}.select[_ngcontent-%COMP%]{width:100%}button[mat-raised-button][_ngcontent-%COMP%], button[mat-stroked-button][_ngcontent-%COMP%], button[mat-icon-button][_ngcontent-%COMP%]{border-radius:10px}.carousel[_ngcontent-%COMP%]{margin-top:12px;overflow:hidden;border-radius:14px;background:linear-gradient(180deg,rgba(0,0,0,.03),transparent);padding:10px 0}.carousel-track[_ngcontent-%COMP%]{display:flex;gap:12px;overflow-x:auto;-webkit-overflow-scrolling:touch;scroll-snap-type:x mandatory;padding:8px 12px}.carousel-track[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:min(82vw,260px);height:160px;object-fit:cover;border-radius:12px;scroll-snap-align:center;box-shadow:0 6px 18px #0c121f14}.photo-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000f2;z-index:99999;display:flex;justify-content:center;align-items:center;padding:20px;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.photo-overlay-content[_ngcontent-%COMP%]{max-width:100%;max-height:100%;overflow-x:auto;display:flex;gap:14px;scroll-snap-type:x mandatory}.photo-fullscreen[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;scroll-snap-align:center}.photo-close[_ngcontent-%COMP%]{position:fixed;top:22px;right:22px;background:#ffffff2b;color:#fff;font-size:1.5rem;border:none;border-radius:10px;width:42px;height:42px;display:flex;justify-content:center;align-items:center;z-index:100000;cursor:pointer;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.history-section[_ngcontent-%COMP%]{border-top:1px solid rgba(15,23,36,.06);padding-top:14px;display:flex;flex-direction:column;gap:12px}.history-section[_ngcontent-%COMP%]   canvas#historicChart[_ngcontent-%COMP%]{width:100%!important;height:220px!important;border-radius:12px;background:linear-gradient(180deg,rgba(6,90,220,.02),transparent);padding:6px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (min-width: 720px){.modal-container[_ngcontent-%COMP%]{padding:22px;gap:26px}.info-grid[_ngcontent-%COMP%]{grid-template-columns:150px 1fr}.carousel-track[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:320px;height:200px}.history-section[_ngcontent-%COMP%]   canvas#historicChart[_ngcontent-%COMP%]{height:260px!important}}img[_ngcontent-%COMP%]{-webkit-user-drag:none;user-drag:none;-webkit-user-select:none;user-select:none}"]})};var ts={exemplar:{gid:1257,nm_cientifico:"Handroanthus albus",nm_comum:"Ip\xEA Amarelo",endereco:"Av. Brasil, 1500 \u2013 Jardim Central",origem_esp:"Nativa",floracao:"Agosto a Setembro"},avaliacoes:[{data:new Date(2022,8,10),dap:18,altura:7.2,status_copa:"Boa",status_tronco:"Boa",status_radicular:"Sem altera\xE7\xF5es",pragas:{sim:!1},fungos:{sim:!1},bacterias:{sim:!1},def_nutricional:{sim:!1},fotos:["https://picsum.photos/seed/arvore_2022_1/600/400","https://picsum.photos/seed/arvore_2022_2/600/400"]},{data:new Date(2023,6,22),dap:19.4,altura:7.6,status_copa:"Regular",status_tronco:"Boa",status_radicular:"Com compacta\xE7\xE3o leve",pragas:{sim:!0,desc:"Ataque inicial de pulg\xF5es"},fungos:{sim:!1},bacterias:{sim:!1},def_nutricional:{sim:!1},fotos:["https://picsum.photos/seed/arvore_2023_1/600/400","https://picsum.photos/seed/arvore_2023_2/600/400","https://picsum.photos/seed/arvore_2023_3/600/400"]},{data:new Date(2024,4,15),dap:20.1,altura:8.1,status_copa:"Muito boa",status_tronco:"Boa",status_radicular:"Sem altera\xE7\xF5es",pragas:{sim:!1},fungos:{sim:!0,desc:"Manchas foliares leves"},bacterias:{sim:!1},def_nutricional:{sim:!0,desc:"Clorose leve nas folhas jovens"},fotos:["https://picsum.photos/seed/arvore_2024_1/600/400","https://picsum.photos/seed/arvore_2024_2/600/400"]}],recomendacoes:[{nivel:1,texto:"Monitorar sinais de clorose nas folhas jovens."},{nivel:2,texto:"Aplicar tratamento biol\xF3gico contra fungos caso aumente a incid\xEAncia."},{nivel:3,texto:"Rever compacta\xE7\xE3o do solo na pr\xF3xima avalia\xE7\xE3o."}]};function Gi(o){let e=o.cloneNode(!0),t=e.querySelectorAll("[id]"),i=o.nodeName.toLowerCase();e.removeAttribute("id");for(let n=0;n<t.length;n++)t[n].removeAttribute("id");return i==="canvas"?os(o,e):(i==="input"||i==="select"||i==="textarea")&&ns(o,e),is("canvas",o,e,os),is("input, textarea, select",o,e,ns),e}function is(o,e,t,i){let n=e.querySelectorAll(o);if(n.length){let s=t.querySelectorAll(o);for(let r=0;r<n.length;r++)i(n[r],s[r])}}var jr=0;function ns(o,e){e.type!=="file"&&(e.value=o.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${jr++}`)}function os(o,e){let t=e.getContext("2d");if(t)try{t.drawImage(o,0,0)}catch{}}function Wi(o){let e=o.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function ji(o,e,t){let{top:i,bottom:n,left:s,right:r}=o;return t>=i&&t<=n&&e>=s&&e<=r}function Vr(o,e){let t=e.left<o.left,i=e.left+e.width>o.right,n=e.top<o.top,s=e.top+e.height>o.bottom;return t||i||n||s}function ot(o,e,t){o.top+=e,o.bottom=o.top+o.height,o.left+=t,o.right=o.left+o.width}function ss(o,e,t,i){let{top:n,right:s,bottom:r,left:a,width:l,height:c}=o,m=l*e,v=c*e;return i>n-v&&i<r+v&&t>a-m&&t<s+m}var qt=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:Wi(t)})})}handleScroll(e){let t=Ue(e),i=this.positions.get(t);if(!i)return null;let n=i.scrollPosition,s,r;if(t===this._document){let c=this.getViewportScrollPosition();s=c.top,r=c.left}else s=t.scrollTop,r=t.scrollLeft;let a=n.top-s,l=n.left-r;return this.positions.forEach((c,m)=>{c.clientRect&&t!==m&&t.contains(m)&&ot(c.clientRect,a,l)}),n.top=s,n.left=r,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function _s(o,e){let t=o.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let i=e.createElement("div");return t.forEach(n=>i.appendChild(n)),i}function Ui(o,e,t){for(let i in e)if(e.hasOwnProperty(i)){let n=e[i];n?o.setProperty(i,n,t?.has(i)?"important":""):o.removeProperty(i)}return o}function Ne(o,e){let t=e?"":"none";Ui(o.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function rs(o,e,t){Ui(o.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Qt(o,e){return e&&e!="none"?o+" "+e:o}function as(o,e){o.style.width=`${e.width}px`,o.style.height=`${e.height}px`,o.style.transform=st(e.left,e.top)}function st(o,e){return`translate3d(${Math.round(o)}px, ${Math.round(e)}px, 0)`}function ls(o){let e=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*e}function Hr(o){let e=getComputedStyle(o),t=Li(e,"transition-property"),i=t.find(a=>a==="transform"||a==="all");if(!i)return 0;let n=t.indexOf(i),s=Li(e,"transition-duration"),r=Li(e,"transition-delay");return ls(s[n])+ls(r[n])}function Li(o,e){return o.getPropertyValue(e).split(",").map(i=>i.trim())}var $r=new Set(["position"]),Vi=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,i,n,s,r,a,l,c,m){this._document=e,this._rootElement=t,this._direction=i,this._initialDomRect=n,this._previewTemplate=s,this._previewClass=r,this._pickupPositionOnPage=a,this._initialTransform=l,this._zIndex=c,this._renderer=m}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),cs(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return Hr(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,i=e?e.template:null,n;if(i&&e){let s=e.matchSize?this._initialDomRect:null,r=e.viewContainer.createEmbeddedView(i,e.context);r.detectChanges(),n=_s(r,this._document),this._previewEmbeddedView=r,e.matchSize?as(n,s):n.style.transform=st(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=Gi(this._rootElement),as(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return Ui(n.style,{"pointer-events":"none",margin:cs(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},$r),Ne(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>n.classList.add(s)):n.classList.add(t)),n}};function cs(o){return"showPopover"in o}var zr={passive:!0},ds={passive:!1},Zr={passive:!1,capture:!0},Wr=800,hs="cdk-drag-placeholder",us=new Set(["position"]),Hi=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=G(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new f;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Se.EMPTY;_pointerUpSubscription=Se.EMPTY;_scrollSubscription=Se.EMPTY;_resizeSubscription=Se.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>Ne(t,e)))}_disabled=!1;beforeStarted=new f;started=new f;released=new f;ended=new f;entered=new f;exited=new f;dropped=new f;moved=this._moveEvents;data;constrainPosition;constructor(e,t,i,n,s,r,a){this._config=t,this._document=i,this._ngZone=n,this._viewportRuler=s,this._dragDropRegistry=r,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new qt(i),r.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>ae(i)),this._handles.forEach(i=>Ne(i,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=ae(e);if(t!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(t,"mousedown",this._pointerDown,ds),i.listen(t,"touchstart",this._pointerDown,zr),i.listen(t,"dragstart",this._nativeDragStart,ds)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?ae(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&Vr(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),i=0,n=0;t.left<e.left?i=e.left-t.left:t.right>e.right&&(i=e.right-t.right),t.top<e.top?n=e.top-t.top:t.bottom>e.bottom&&(n=e.bottom-t.bottom);let s=this._activeTransform.x,r=this._activeTransform.y,a=s+i,l=r+n;this._rootElement.style.transform=st(a,l),this._activeTransform={x:a,y:l},this._passiveTransform={x:a,y:l}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Ne(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Ne(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let n=Math.abs(t.x-this._pickupPositionOnPage.x),s=Math.abs(t.y-this._pickupPositionOnPage.y);if(n+s>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),l=this._dropContainer;if(!a){this._endDragSequence(e);return}(!l||!l.isDragging()&&!l.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let i=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,t);else{let n=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=i.x-n.x+this._passiveTransform.x,s.y=i.y-n.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:e,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){it(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),i=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",Ur,Zr)}),i){let n=this._rootElement,s=n.parentNode,r=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");s.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=new Vi(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,t)),rs(n,!1,us),this._document.body.appendChild(s.replaceChild(r,n)),this.started.next({source:this,event:e}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let i=this.isDragging(),n=it(t),s=!n&&t.button!==0,r=this._rootElement,a=Ue(t),l=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+Wr>Date.now(),c=n?En(t):On(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),i||s||l||c)return;if(this._handles.length){let y=r.style;this._rootElementTapHighlight=y.webkitTapHighlightColor||"",y.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(y=>this._updateOnScroll(y)),this._boundaryElement&&(this._boundaryRect=Wi(this._boundaryElement));let m=this._previewTemplate;this._pickupPositionInElement=m&&m.template&&!m.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let v=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:v.x,y:v.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){rs(this._rootElement,!0,us),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,i=t.getItemIndex(this),n=this._getPointerPositionOnPage(e),s=this._getDragDistance(n),r=t._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:s,dropPoint:n,event:e}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:r,distance:s,dropPoint:n,event:e}),t.drop(this,i,this._initialIndex,this._initialContainer,r,s,n,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:i,y:n}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{let r=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(r+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(s,this._dropContainer,a),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let n=a=>{(!a||this._preview&&Ue(a)===this._preview.element&&a.propertyName==="transform")&&(r(),i(),clearTimeout(s))},s=setTimeout(n,t*1.5),r=this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=_s(this._placeholderRef,this._document)):i=Gi(this._rootElement),i.style.pointerEvents="none",i.classList.add(hs),i}_getPointerPositionInElement(e,t,i){let n=t===this._rootElement?null:t,s=n?n.getBoundingClientRect():e,r=it(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),l=r.pageX-s.left-a.left,c=r.pageY-s.top-a.top;return{x:s.left-e.left+l,y:s.top-e.top+c}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),i=it(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,n=i.pageX-t.left,s=i.pageY-t.top;if(this._ownerSVGElement){let r=this._ownerSVGElement.getScreenCTM();if(r){let a=this._ownerSVGElement.createSVGPoint();return a.x=n,a.y=s,a.matrixTransform(r.inverse())}}return{x:n,y:s}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:n}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:r}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),m=a.top+r,v=a.bottom-(c-r),y=a.left+s,M=a.right-(l-s);i=ps(i,y,M),n=ps(n,m,v)}return{x:i,y:n}}_updatePointerDirectionDelta(e){let{x:t,y:i}=e,n=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-s.x),a=Math.abs(i-s.y);return r>this._config.pointerDirectionChangeThreshold&&(n.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(n.y=i>s.y?1:-1,s.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Ne(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let i=1/this.scale,n=st(e*i,t*i),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=Qt(n,this._initialTransform)}_applyPreviewTransform(e,t){let i=this._previewTemplate?.template?void 0:this._initialTransform,n=st(e,t);this._preview.setTransform(Qt(n,i))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||i.width===0&&i.height===0)return;let s=n.left-i.left,r=i.right-n.right,a=n.top-i.top,l=i.bottom-n.bottom;n.width>i.width?(s>0&&(e+=s),r>0&&(e-=r)):e=0,n.height>i.height?(a>0&&(t+=a),l>0&&(t-=l)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:it(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let i=Ue(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&ot(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Ct(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let i=this._previewContainer||"global";if(i==="parent")return e;if(i==="global"){let n=this._document;return t||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return ae(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,i){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let n=this._anchor??=Gi(this._placeholder);n.classList.remove(hs),n.classList.add("cdk-drag-anchor"),n.style.transform="",i?i.before(n):ae(t.element).appendChild(n)}}};function ps(o,e,t){return Math.max(e,Math.min(t,o))}function it(o){return o.type[0]==="t"}function Ur(o){o.preventDefault()}function gs(o,e,t){let i=ms(e,o.length-1),n=ms(t,o.length-1);if(i===n)return;let s=o[i],r=n<i?-1:1;for(let a=i;a!==n;a+=r)o[a]=o[a+r];o[n]=s}function ms(o,e){return Math.max(0,Math.min(e,o))}var Jt=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,i,n){let s=this._itemPositions,r=this._getItemIndexFromPointerPosition(e,t,i,n);if(r===-1&&s.length>0)return null;let a=this.orientation==="horizontal",l=s.findIndex(Z=>Z.drag===e),c=s[r],m=s[l].clientRect,v=c.clientRect,y=l>r?1:-1,M=this._getItemOffsetPx(m,v,y),at=this._getSiblingOffsetPx(l,s,y),Ms=s.slice();return gs(s,l,r),s.forEach((Z,Ps)=>{if(Ms[Ps]===Z)return;let Qi=Z.drag===e,ei=Qi?M:at,Ji=Qi?e.getPlaceholderElement():Z.drag.getRootElement();Z.offset+=ei;let Yi=Math.round(Z.offset*(1/Z.drag.scale));a?(Ji.style.transform=Qt(`translate3d(${Yi}px, 0, 0)`,Z.initialTransform),ot(Z.clientRect,0,ei)):(Ji.style.transform=Qt(`translate3d(0, ${Yi}px, 0)`,Z.initialTransform),ot(Z.clientRect,ei,0))}),this._previousSwap.overlaps=ji(v,t,i),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?n.x:n.y,{previousIndex:l,currentIndex:r}}enter(e,t,i,n){let s=n==null||n<0?this._getItemIndexFromPointerPosition(e,t,i):n,r=this._activeDraggables,a=r.indexOf(e),l=e.getPlaceholderElement(),c=r[s];if(c===e&&(c=r[s+1]),!c&&(s==null||s===-1||s<r.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(c=r[0]),a>-1&&r.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){let m=c.getRootElement();m.parentElement.insertBefore(l,m),r.splice(s,0,e)}else this._element.appendChild(l),r.push(e);l.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let i=this._itemPositions.find(n=>n.drag===e)?.initialTransform;t.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:i})=>{ot(i,e,t)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:Wi(i)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,i){let n=this.orientation==="horizontal",s=n?t.left-e.left:t.top-e.top;return i===-1&&(s+=n?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,i){let n=this.orientation==="horizontal",s=t[e].clientRect,r=t[e+i*-1],a=s[n?"width":"height"]*i;if(r){let l=n?"left":"top",c=n?"right":"bottom";i===-1?a-=r.clientRect[l]-s[c]:a+=s[l]-r.clientRect[c]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,n=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let r=i[i.length-1].clientRect;return n?e>=r.right:t>=r.bottom}else{let r=i[0].clientRect;return n?e<=r.left:t<=r.top}}_getItemIndexFromPointerPosition(e,t,i,n){let s=this.orientation==="horizontal",r=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===e)return!1;if(n){let c=s?n.x:n.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return s?t>=Math.floor(l.left)&&t<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom)});return r===-1||!this._sortPredicate(r,e)?-1:r}},$i=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<t.length;i++){let n=t[i];this._relatedNodes.push([n,n.nextSibling])}this.withItems(e)}sort(e,t,i,n){let s=this._getItemIndexFromPointerPosition(e,t,i),r=this._previousSwap;if(s===-1||this._activeItems[s]===e)return null;let a=this._activeItems[s];if(r.drag===a&&r.overlaps&&r.deltaX===n.x&&r.deltaY===n.y)return null;let l=this.getItemIndex(e),c=e.getPlaceholderElement(),m=a.getRootElement();s>l?m.after(c):m.before(c),gs(this._activeItems,l,s);let v=this._getRootNode().elementFromPoint(t,i);return r.deltaX=n.x,r.deltaY=n.y,r.drag=a,r.overlaps=m===v||m.contains(v),{previousIndex:l,currentIndex:s}}enter(e,t,i,n){let s=this._activeItems.indexOf(e);s>-1&&this._activeItems.splice(s,1);let r=n==null||n<0?this._getItemIndexFromPointerPosition(e,t,i):n;r===-1&&(r=this._getClosestItemIndexToPointer(e,t,i));let a=this._activeItems[r];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(r,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[n,s]=this._relatedNodes[i];n.parentNode===e&&n.nextSibling!==s&&(s===null?e.appendChild(n):s.parentNode===e&&e.insertBefore(n,s))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,i){let n=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(i)),s=n?this._activeItems.findIndex(r=>{let a=r.getRootElement();return n===a||a.contains(n)}):-1;return s===-1||!this._sortPredicate(s,e)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=Ct(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,s=-1;for(let r=0;r<this._activeItems.length;r++){let a=this._activeItems[r];if(a!==e){let{x:l,y:c}=a.getRootElement().getBoundingClientRect(),m=Math.hypot(t-l,i-c);m<n&&(n=m,s=r)}}return s}},fs=.05,vs=.05,U=(function(o){return o[o.NONE=0]="NONE",o[o.UP=1]="UP",o[o.DOWN=2]="DOWN",o})(U||{}),N=(function(o){return o[o.NONE=0]="NONE",o[o.LEFT=1]="LEFT",o[o.RIGHT=2]="RIGHT",o})(N||{}),zi=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new f;entered=new f;exited=new f;dropped=new f;sorted=new f;receivingStarted=new f;receivingStopped=new f;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Se.EMPTY;_verticalScrollDirection=U.NONE;_horizontalScrollDirection=N.NONE;_scrollNode;_stopScrollTimers=new f;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,i,n,s){this._dragDropRegistry=t,this._ngZone=n,this._viewportRuler=s;let r=this.element=ae(e);this._document=i,this.withOrientation("vertical").withElementContainer(r),t.registerDropContainer(this),this._parentPositions=new qt(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,i,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,i,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,n,s,r,a,l={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:s,distance:r,dropPoint:a,event:l})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(n=>n.isDragging()).every(n=>e.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof Jt&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new $i(this._document,this._dragDropRegistry);else{let t=new Jt(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,i)=>this.sortPredicate(t,i,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=ae(this.element),i=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(e);return i>-1&&this._scrollableElements.splice(i,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,n){if(this.sortingDisabled||!this._domRect||!ss(this._domRect,fs,t,i))return;let s=this._sortStrategy.sort(e,t,i,n);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,n=U.NONE,s=N.NONE;if(this._parentPositions.positions.forEach((r,a)=>{a===this._document||!r.clientRect||i||ss(r.clientRect,fs,e,t)&&([n,s]=qr(a,r.clientRect,this._direction,e,t),(n||s)&&(i=a))}),!n&&!s){let{width:r,height:a}=this._viewportRuler.getViewportSize(),l={width:r,height:a,top:0,right:r,bottom:a,left:0};n=ys(l,t),s=bs(l,e),i=window}i&&(n!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=s,this._scrollNode=i,(n||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),en(0,Ki).pipe(x(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===U.UP?e.scrollBy(0,-t):this._verticalScrollDirection===U.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===N.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===N.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&ji(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(n=>n._canReceive(e,t,i))}_canReceive(e,t,i){if(!this._domRect||!ji(this._domRect,t,i)||!this.enterPredicate(e,this))return!1;let n=this._getShadowRoot().elementFromPoint(t,i);return n?n===this._container||this._container.contains(n):!1}_startReceiving(e,t){let i=this._activeSiblings;!i.has(e)&&t.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Ct(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function ys(o,e){let{top:t,bottom:i,height:n}=o,s=n*vs;return e>=t-s&&e<=t+s?U.UP:e>=i-s&&e<=i+s?U.DOWN:U.NONE}function bs(o,e){let{left:t,right:i,width:n}=o,s=n*vs;return e>=t-s&&e<=t+s?N.LEFT:e>=i-s&&e<=i+s?N.RIGHT:N.NONE}function qr(o,e,t,i,n){let s=ys(e,n),r=bs(e,i),a=U.NONE,l=N.NONE;if(s){let c=o.scrollTop;s===U.UP?c>0&&(a=U.UP):o.scrollHeight-c>o.clientHeight&&(a=U.DOWN)}if(r){let c=o.scrollLeft;t==="rtl"?r===N.RIGHT?c<0&&(l=N.RIGHT):o.scrollWidth+c>o.clientWidth&&(l=N.LEFT):r===N.LEFT?c>0&&(l=N.LEFT):o.scrollWidth-c>o.clientWidth&&(l=N.RIGHT)}return[a,l]}var nt={capture:!0},Bi={passive:!1,capture:!0},Qr=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275cmp=T({type:o,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,n){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return o})(),qi=(()=>{class o{_ngZone=d(H);_document=d(oe);_styleLoader=d(xn);_renderer=d(Ve).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new f;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=G([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new f;pointerUp=new f;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,Bi)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,i){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(Qr),this._activeDragInstances.update(n=>[...n,t]),this._activeDragInstances().length===1)){let n=i.type.startsWith("touch"),s=a=>this.pointerUp.next(a),r=[["scroll",a=>this._scroll.next(a),nt],["selectstart",this._preventDefaultWhileDragging,Bi]];n?r.push(["touchend",s,nt],["touchcancel",s,nt]):r.push(["mouseup",s,nt]),n||r.push(["mousemove",a=>this.pointerMove.next(a),Bi]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=r.map(([a,l,c])=>this._renderer.listen(this._document,a,l,c))})}}stopDragging(t){this._activeDragInstances.update(i=>{let n=i.indexOf(t);return n>-1?(i.splice(n,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let i=[this._scroll];return t&&t!==this._document&&i.push(new Le(n=>this._ngZone.runOutsideAngular(()=>{let s=this._renderer.listen(t,"scroll",r=>{this._activeDragInstances().length&&n.next(r)},nt);return()=>{s()}}))),Ce(...i)}registerDirectiveNode(t,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,i)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||o)};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Jr={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Ds=(()=>{class o{_document=d(oe);_ngZone=d(H);_viewportRuler=d(Fn);_dragDropRegistry=d(qi);_renderer=d(Ve).createRenderer(null,null);constructor(){}createDrag(t,i=Jr){return new Hi(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new zi(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||o)};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Zi=new R("CDK_DRAG_PARENT");var ws=new R("CdkDragHandle"),Ss=(()=>{class o{element=d(W);_parentDrag=d(Zi,{optional:!0,skipSelf:!0});_dragDropRegistry=d(qi);_stateChanges=new f;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let t=this.element.nativeElement.parentElement;for(;t;){let i=this._dragDropRegistry.getDragDirectiveForNode(t);if(i){this._parentDrag=i,i._addHandle(this);break}t=t.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(i){return new(i||o)};static \u0275dir=Oe({type:o,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",di]},features:[Dt([{provide:ws,useExisting:o}])]})}return o})(),Yr=new R("CDK_DRAG_CONFIG"),Kr=new R("CdkDropList"),Cs=(()=>{class o{element=d(W);dropContainer=d(Kr,{optional:!0,skipSelf:!0});_ngZone=d(H);_viewContainerRef=d(He);_dir=d(Qe,{optional:!0});_changeDetectorRef=d(Q);_selfHandle=d(ws,{optional:!0,self:!0});_parentDrag=d(Zi,{optional:!0,skipSelf:!0});_dragDropRegistry=d(qi);_destroyed=new f;_handles=new J([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new S;released=new S;ended=new S;entered=new S;exited=new S;dropped=new S;moved=new Le(t=>{let i=this._dragRef.moved.pipe(Y(n=>({source:this,pointerPosition:n.pointerPosition,event:n.event,delta:n.delta,distance:n.distance}))).subscribe(t);return()=>{i.unsubscribe()}});_injector=d(C);constructor(){let t=this.dropContainer,i=d(Yr,{optional:!0}),n=d(Ds);this._dragRef=n.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(x(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){he(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let i=t.rootElementSelector,n=t.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let i=this._handles.getValue();i.push(t),this._handles.next(i)}_removeHandle(t){let i=this._handles.getValue(),n=i.indexOf(t);n>-1&&(i.splice(n,1),this._handles.next(i))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,i=t;this.rootElementSelector&&(i=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):ae(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let i=this._dir,n=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,r=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof n=="object"&&n?n:qe(n),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(r).withPreviewContainer(this.previewContainer||"global"),i&&t.withDirection(i.value)}}),t.beforeStarted.pipe(P(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let n=this._dragDropRegistry.getDragDirectiveForNode(i);if(n){t.withParent(n._dragRef);break}i=i.parentElement}})}_handleEvents(t){t.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),t.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(t){let{lockAxis:i,dragStartDelay:n,constrainPosition:s,previewClass:r,boundaryElement:a,draggingDisabled:l,rootElementSelector:c,previewContainer:m}=t;this.disabled=l??!1,this.dragStartDelay=n||0,this.lockAxis=i||null,s&&(this.constrainPosition=s),r&&(this.previewClass=r),a&&(this.boundaryElement=a),c&&(this.rootElementSelector=c),m&&(this.previewContainer=m)}_setupHandlesListener(){this._handles.pipe(dt(t=>{let i=t.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Ge(t=>Ce(...t.map(i=>i._stateChanges.pipe(ne(i))))),x(this._destroyed)).subscribe(t=>{let i=this._dragRef,n=t.element.nativeElement;t.disabled?i.disableHandle(n):i.enableHandle(n)})}static \u0275fac=function(i){return new(i||o)};static \u0275dir=Oe({type:o,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,n){i&2&&q("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",di],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",gn]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Dt([{provide:Zi,useExisting:o}]),ht]})}return o})();var Ts=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=D({type:o});static \u0275inj=b({providers:[Ds],imports:[Nn]})}return o})();var ea=["*"];function ta(o,e){o&1&&(h(0,"div",5)(1,"div",6),$(2,"div",7)(3,"div",7),u()())}function ia(o,e){if(o&1){let t=ye();h(0,"div",8)(1,"button",11),O("click",function(){ce(t);let n=k(2);return de(n.setExtend())}),h(2,"i",12),p(3," fullscreen "),u()(),$(4,"div",13),u()}if(o&2){let t=k(2);E("cdkDragDisabled",t.mapService.isMobile())}}function na(o,e){if(o&1&&(h(0,"span",14),p(1),u(),h(2,"span"),p(3),u()),o&2){let t=e.$implicit,i=k(4);_(),ue("",i.formatedKeys[t],":"),_(2),A(i.mainData[t])}}function oa(o,e){if(o&1&&ge(0,na,4,2,null,null,_e),o&2){let t=k(3);ve(t.keys)}}function sa(o,e){if(o&1&&(h(0,"div",10),se(1,oa,2,0),u()),o&2){let t=k(2);_(),re(t.dataObj.typeOfDialog=="info"?1:-1)}}function ra(o,e){if(o&1&&(se(0,ia,5,1,"div",8),h(1,"div",9),se(2,sa,2,1,"div",10),h(3,"div"),gt(4),u()()),o&2){let t=k();re(t.dataObj.typeOfDialog=="info"?0:-1),_(),q("box-resizeble",!t.mapService.isMobile())("box-heigth-limit",!t.mapService.isMobile())("box-width-limit",!t.mapService.isMobile()),_(),re(t.formatedKeys&&t.showAttributes?2:-1)}}var g={igual:{value:1,text:"Igual a (=)",cqlfilter:`strStripAccents(strToLowerCase("/attr/"))='/value1/'`},diferente:{value:2,text:"Diferente de (\u2260)",cqlfilter:`strStripAccents(strToLowerCase("/attr/"))<>'/value1/'`},contem:{value:3,text:"Cont\xE9m",cqlfilter:`isLike(strStripAccents(strToLowerCase("/attr/")), '^.*/value1/.*$')=true`},naoContem:{value:4,text:"N\xE3o cont\xE9m",cqlfilter:`strStripAccents(strToLowerCase("/attr/"))NOT LIKE'%/value1/%'`},nulo:{value:5,text:"\xC9 nulo",cqlfilter:'strStripAccents(strToLowerCase("/attr/"))IS NULL'},naoNulo:{value:6,text:"N\xE3o \xE9 nulo",cqlfilter:'strStripAccents(strToLowerCase("/attr/"))IS NOT NULL'},inicia:{value:7,text:"Inicia com",cqlfilter:`strStripAccents(strToLowerCase("/attr/"))LIKE'/value1/%'`},finaliza:{value:8,text:"Finaliza com",cqlfilter:`strStripAccents(strToLowerCase("/attr/"))LIKE'%/value1/'`},maior:{value:9,text:"Maior que",cqlfilter:`strStripAccents(strToLowerCase("/attr/"))>'/value1/'`},menor:{value:10,text:"Menor que",cqlfilter:`strStripAccents(strToLowerCase("/attr/"))<'/value1/'`},maiorIgual:{value:11,text:"Maior ou igual a",cqlfilter:`strStripAccents(strToLowerCase("/attr/"))>='/value1/'`},menorIgual:{value:12,text:"Menor ou igual a",cqlfilter:`strStripAccents(strToLowerCase("/attr/"))<='/value1/'`},entre:{value:13,text:"Entre",cqlfilter:`"/attr/">='/value1/'AND"/attr/"<='/value2/'`},naoEntre:{value:14,text:"N\xE3o est\xE1 entre",cqlfilter:`"/attr/"<'/value1/'AND"/attr/">'/value2/'`},antes:{value:15,text:"Antes de",cqlfilter:`"/attr/"<dateParse('yyyy-MM-dd','/value1/')`},depois:{value:16,text:"Depois de",cqlfilter:`"/attr/">dateParse('yyyy-MM-dd','/value1/')`},antesDurante:{value:17,text:"Antes (incluso) de",cqlfilter:`"/attr/"<=dateParse('yyyy-MM-dd','/value1/')`},depoisDurante:{value:18,text:"Depois (incluso) de",cqlfilter:`"/attr/">=dateParse('yyyy-MM-dd','/value1/')`},igualData:{value:19,text:"Igual a",cqlfilter:`"/attr/"=dateParse('yyyy-MM-dd','/value1/')`},diferenteData:{value:20,text:"Diferente de",cqlfilter:`"/attr/" < dateParse('yyyy-MM-dd','/value1/')AND"/attr/" > dateParse('yyyy-MM-dd','/value1/')`},entreData:{value:21,text:"Entre",cqlfilter:`"/attr/" >= dateParse('yyyy-MM-dd','/value1/')AND"/attr/" <= dateParse('yyyy-MM-dd','/value2/')`},naoEntreData:{value:22,text:"N\xE3o est\xE1 entre",cqlfilter:`"/attr/" < dateParse('yyyy-MM-dd','/value1/')OR"/attr/" > dateParse('yyyy-MM-dd','/value2/')`}},aa={number:{type:"text",options:[g.igual,g.diferente,g.maior,g.menor,g.maiorIgual,g.menorIgual,g.entre,g.naoEntre],default:g.igual.value},int:{type:"text",options:[g.igual,g.diferente,g.maior,g.menor,g.maiorIgual,g.menorIgual,g.entre,g.naoEntre],default:g.igual.value},string:{type:"text",options:[g.igual,g.diferente,g.contem,g.naoContem,g.inicia,g.finaliza,g.nulo,g.naoNulo],default:g.contem.value},boolean:{type:"checkbox",options:[g.igual],default:g.igual.value},date:{type:"date",options:[g.igualData,g.diferenteData,g.depois,g.antes,g.entreData,g.naoEntreData,g.nulo,g.naoNulo],default:g.igualData.value}},rt=class o{constructor(e,t,i,n){this.mapService=e;this.dialogRef=t;this.dataObj=i;this._elementRef=n;this.layer=this.mapService.map.getAllLayers().filter(r=>r.get("id")===this.dataObj.data.layerId)[0];let s=this.layer?.getSource()?.getFeatures().filter(r=>r.get(this.layer.get("pk_name"))==this.dataObj.data.pk_value)[0];this.mainData=s.getProperties(),this.keys=Object.keys(this.mainData).filter(r=>r!="geometry"),this.formatedKeys=this.keys.reduce((r,a)=>(r[a]=a,r),{}),this.emitData().then(()=>{this.finishLoad(this.dataObj.data,i.zoomToFeature)}),this.dialogRef.afterClosed().subscribe(r=>{this.mapService.setCloseLayersModals(this.dataObj.typeOfDialog,this.dataObj.data.layerId,this.dataObj.data.pk_value?.toString())})}outputData=new S;showAttributes=!0;keys;formatedKeys;geomIsPoint=!1;layerSource;isLoading=!0;mainData;telasGsu={};dataFull;searchIsLoading=!1;editable=!1;profileForm;types=g;typeMapper=aa;layer;temQuadras=!1;ngAfterViewInit(){}ngOnDestroy(){(this.dataObj.typeOfDialog=="info"||this.dataObj.typeOfDialog=="edit")&&(this.mapService.clearHighligthFeature(this.dataObj?.data?.geomFeature,"higthlihtInfo"),this.finishLoad())}updatePositionModal(){let i=this._elementRef.nativeElement?.parentElement?.parentElement?.parentElement?.parentElement?.getBoundingClientRect();i&&this.mapService.updatePositionModal(this.mapService.dialogPositionGeneralInfo,{top:i.top,left:i.left})}close(){this.updatePositionModal(),this.dialogRef.close()}setExtend(){this.mapService.map.getView().fit(this.dataObj?.data?.geomFeature?.getGeometry()?.getExtent(),{padding:Array(4).fill(150),duration:500,maxZoom:19})}addToStreetView(){}finishLoad(e=void 0,t=!1){if(this.mapService.clearHighligthAllFeature("higthlihtInfo"),e){let i=new Pe({geometry:e.geomFeature?.getGeometry()});i.setProperties({}),this.mapService.highligthFeature(i,"higthlihtInfo")}t&&this.mapService.map.getView().fit(e?.geomFeature?.getGeometry()?.getExtent(),{padding:Array(4).fill(150),duration:500,maxZoom:21}),this.isLoading=!1}resolveEmit(){return new Promise(e=>{setTimeout(()=>{this.outputData.emit({layerSource:this.layerSource,dataOrForm:this.mainData,formatedKeys:this.formatedKeys,typeMode:this.dataObj.typeOfDialog,telasGsu:this.telasGsu,dataFull:this.dataFull})},100),e()})}emitData(){return lt(this,null,function*(){let e=yield this.resolveEmit()})}unsorted(){return 0}setValue(e,t){}getType(e,t){}getControl(e,t){}getControlValue(e,t){}onSubmit(){return lt(this,null,function*(){})}clearFilter(){}isRange(e){}isMap(e){}isSearchable(){}toTop(){this.mapService.modalToTop(this._elementRef.nativeElement)}openEditMode(){this.mapService.openGeneralFeatureInfo(this.dataObj.data,this.dataObj.zoomToFeature,"edit")}mayEdit(){return lt(this,null,function*(){})}static \u0275fac=function(t){return new(t||o)(I(Fe),I(V),I(fe),I(W))};static \u0275cmp=T({type:o,selectors:[["app-generic-info-modal-component"]],inputs:{showAttributes:"showAttributes"},outputs:{outputData:"outputData"},ngContentSelectors:ea,decls:9,vars:3,consts:[[3,"click"],["cdkDragHandle","","cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragBoundary",".content",1,"d-flex","justify-content-center","align-items-center","p-0","modal-header","modal-header-focus","w-100",3,"cdkDragDisabled"],[1,"mx-4","modal-title"],["type","button",1,"btn","modal-close-button",3,"click"],[1,"material-icons","modal-close-icon"],[1,"p-2",2,"width","300px"],[1,"d-flex","mb-3"],[1,"skeleton","skeleton-icon"],["cdkDragHandle","","cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragBoundary",".app-boundary",1,"d-flex","align-items-center","justify-content-start","p-2",3,"cdkDragDisabled"],[1,"p-3"],["id","attributes-container",2,"line-height","1.5em"],["matTooltip","Aproximar para fei\xE7\xE3o","matTooltipPosition","below",1,"btn","btn-outline-light","btn-edit","d-flex","mx-1",3,"click"],[1,"material-icons-outlined","notranslate",2,"font-size","20px","width","20px","color","rgb(61, 61, 61)"],[1,"m-auto"],[1,"me-1",2,"font-weight","500"]],template:function(t,i){t&1&&(_t(),h(0,"div",0),O("click",function(){return i.toTop()}),h(1,"div",1)(2,"span",2),p(3),u(),h(4,"button",3),O("click",function(){return i.close()}),h(5,"i",4),p(6," close "),u()()(),se(7,ta,4,0,"div",5)(8,ra,5,8),u()),t&2&&(_(),E("cdkDragDisabled",i.mapService.isMobile()),_(2),A(i.dataObj.data.layerName),_(4),re(i.isLoading?7:8))},dependencies:[Ts,Cs,Ss],styles:[".title[_ngcontent-%COMP%]{background:#369;color:#fff;text-align:center;box-shadow:0 3px 4px #0003;font-size:1.1em;line-height:normal;z-index:1}.btn-edit[_ngcontent-%COMP%]{padding:.1em;border:1px solid rgb(194,194,194);border-radius:4px}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}"]})};var Yt=class o{modalInfoList=[{component:rt,layerOfUse:[]}];getComponent(e){let t=this.modalInfoList.filter(i=>i.layerOfUse.includes(e));return t.length===0?rt:t[0].component}static \u0275fac=function(t){return new(t||o)};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})};function ca(o,e){o&1&&hn(0)}var Kt=class o{childComponent;injector;initialState="half";requestClose=new S;heights={collapsed:8,half:50,expanded:100};pos=G(100);current="half";dragging=!1;startY=0;startPos=0;ngOnInit(){let e=document.querySelector(".sheet");e.style.transition="none",this.setState(this.initialState,!1),setTimeout(()=>{e.style.transition=""})}setState(e,t=!0){this.current=e;let i=this.heights[e];this.pos.set(100-i)}disableAnimationOnce(){let e=document.querySelector(".sheet");e.style.transition="none",requestAnimationFrame(()=>{e.style.transition=""})}handleClose(){this.setState("collapsed"),setTimeout(()=>this.requestClose.emit(null),200)}transform(){return`translateY(${this.pos()}vh)`}startDrag(e){if(e.target.closest(".content"))return;this.dragging=!0,this.startY=e.clientY,this.startPos=this.pos();let t=n=>{if(!this.dragging)return;let r=(n.clientY-this.startY)/window.innerHeight*100,a=Math.min(100,Math.max(0,this.startPos+r));this.pos.set(a)},i=()=>{this.dragging=!1;let n=this.pos();n>92?this.handleClose():n>45?this.setState("half"):this.setState("expanded"),window.removeEventListener("pointermove",t),window.removeEventListener("pointerup",i)};window.addEventListener("pointermove",t),window.addEventListener("pointerup",i)}onScroll(e){let t=e.target;if(this.current==="expanded"&&t.scrollTop===0){if(e.deltaY<0)return;this.setState("half")}this.current==="half"&&t.scrollTop===0&&e.deltaY<0&&this.setState("expanded")}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=T({type:o,selectors:[["app-bottom-sheet-component"]],inputs:{childComponent:"childComponent",injector:"injector",initialState:"initialState"},outputs:{requestClose:"requestClose"},decls:6,vars:4,consts:[[1,"sheet",3,"pointerdown"],[1,"handle"],[1,"close-btn",3,"click"],[1,"content",3,"scroll"],[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(t,i){t&1&&(h(0,"div",0),O("pointerdown",function(s){return i.startDrag(s)}),$(1,"div",1),h(2,"button",2),O("click",function(){return i.handleClose()}),p(3,"\u2715"),u(),h(4,"div",3),O("scroll",function(s){return i.onScroll(s)}),j(5,ca,1,0,"ng-container",4),u()()),t&2&&(yt("transform",i.transform()),_(5),E("ngComponentOutlet",i.childComponent)("ngComponentOutletInjector",i.injector))},dependencies:[vn],styles:[".backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000040;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:1}.sheet[_ngcontent-%COMP%]{position:fixed;left:0;width:100%;height:100vh;bottom:0;background:#fff;border-radius:18px 18px 0 0;box-shadow:0 -4px 20px #00000040;transition:transform .25s cubic-bezier(.22,1,.36,1);touch-action:none;display:flex;flex-direction:column;z-index:2}.handle[_ngcontent-%COMP%]{margin:12px auto 0;width:45px;height:6px;border-radius:3px;background:#d0d0d0}.close-btn[_ngcontent-%COMP%]{position:absolute;right:12px;top:8px;background:none;border:none;font-size:22px;opacity:.6}.content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;touch-action:pan-y;-webkit-overflow-scrolling:touch}"]})};var Os=new R("BOTTOM_SHEET_DATA"),Es=new R("BOTTOM_SHEET_REF");var Xt=class o{constructor(e,t){this.appRef=e;this.envInjector=t}activeSheet;open(e,t={}){this.activeSheet&&this.close();let i=new f,n={close:a=>{i.next(a),i.complete(),this.close()},afterClosed:()=>i},s=C.create({providers:[{provide:Os,useValue:t.data},{provide:Es,useValue:n}],parent:this.envInjector}),r=Ee(Kt,{environmentInjector:this.envInjector,elementInjector:s});return r.instance.childComponent=e,r.instance.injector=s,r.instance.initialState=t.initialState,r.instance.requestClose.subscribe(a=>{n.close(a)}),this.appRef.attachView(r.hostView),document.body.appendChild(r.location.nativeElement),this.activeSheet=r,n}close(){this.activeSheet&&(document.body.removeChild(this.activeSheet.location.nativeElement),this.appRef.detachView(this.activeSheet.hostView),this.activeSheet.destroy(),this.activeSheet=void 0)}static \u0275fac=function(t){return new(t||o)(B(ut),B(je))};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})};var Fe=class o{constructor(e,t,i,n,s,r){this.ngZone=e;this.dialog=t;this.selecModal=i;this.layersService=n;this.rendererFactory=s;this.sheet=r;this.selectedTileSource=this.layersService.tileSources[1],this.renderer=this.rendererFactory.createRenderer(null,null),this.ngZone.runOutsideAngular(()=>this.map=new vo({moveTolerance:3,interactions:go().extend([new _o]),layers:[this.tileLayer],view:new lo({projection:"EPSG:4326",center:[-46.9212,-23.448],zoom:18}),controls:fo({attribution:!1,zoom:!1,rotate:!1}).extend([])})),this.map.addLayer(this.layersService.fasesLayer),this.map.addLayer(this.layersService.arvoresLayer),this.map.on("loadstart",()=>{this.mapIsRedering=!0}),this.map.on("loadend",()=>{this.mapIsRedering=!1}),this.setMainInfoFeaturesFunction()}responsive=d(Gt);isMobile=_n(()=>this.responsive.isSmallScreen());map;mapIsRedering=!0;selectedTileSource=new Me;tileLayer=new Me;renderer;onClickComponent;menuOnClickDialog;generalInfoDialog;mainInfoFeaturesFunctionSubscrition;updateView(e=14,t=[-47.562,-23.3574]){this.map.getView().setZoom(e),this.map.getView().setCenter(Kn(t,"EPSG:4326"))}setTarget(e){this.map.setTarget(e)}updateSize(){this.map.updateSize()}detach(){this.map.setTarget(void 0)}attach(e){this.map.setTarget(e),this.map.updateSize()}setTileSource(e=this.selectedTileSource){this.selectedTileSource=e,this.tileLayer.setSource(e.getSource())}setMainInfoFeaturesFunction(){this.leaveMainInfoFeaturesFunction(),this.mainInfoFeaturesFunctionSubscrition=this.mainInfoFeaturesFunction()}leaveMainInfoFeaturesFunction(){to(this.mainInfoFeaturesFunctionSubscrition)}mainInfoFeaturesFunction(){var e=this.map.on("click",t=>{let i=[];this.map.forEachFeatureAtPixel(t.pixel,(s,r)=>{console.log("feature: ",s),console.log("layer: ",r),!(typeof r.get("id")=="string"&&["HLO","HLI"].some(a=>r.get("id").includes(a)))&&r.get("id")==2&&i.push(s)});let n=[t.originalEvent.pageX,t.originalEvent.pageY];this.openOnClickComponent(i,n)});return e}openOnClickComponent(e,t){let i={left:(t[0]+10).toString()+"px",top:(t[1]+10).toString()+"px"},n=new te;n.minWidth=0,n.disableClose=!1,n.hasBackdrop=!1,n.position=i,n.data={mappedMenu:e,left:t[0],top:t[1]},this.onClickComponent instanceof V&&this.onClickComponent.close(),this.onClickComponent=this.dialog.open(Wt,n)}closeOnClickComponent(){this.onClickComponent?.close()}openMenuOnClickComponent(e){this.menuOnClickDialog instanceof V&&this.menuOnClickDialog.close(),this.menuOnClickDialog=this.dialog.open(zt,e)}findLayerOfFeature(e){for(let t of this.map.getLayers().getArray())if(t instanceof pe){let i=t.getSource();if(i&&i.getFeatures().includes(e))return t}}openGeneralFeatureInfo(e,t=!1,i="info",n=[]){let s=new te;s.disableClose=!1,s.hasBackdrop=!1,s.panelClass=n,this.isMobile()?(s.width="100vw",s.height="100%",s.position={top:"0px",left:"0px"}):(s.panelClass.push("box-resizeble-container"),s.panelClass.push("isfeModal"),s.position={top:this.dialogPositionGeneralInfo.top+"px",left:this.dialogPositionGeneralInfo.left+"px"}),s.data={data:e,zoomToFeature:t,typeOfDialog:i},s.enterAnimationDuration=0,this.generalInfoDialog instanceof V&&(this.setCloseLayersModals(i,e.layerId,e.pk_value?.toString()),this.generalInfoDialog.close());let r=this.selecModal.getComponent(Number(e.layerId));var a=this.modalAlreadyOpended(i,e.layerId,e.pk_value?.toString());if(!a)setTimeout(()=>{this.generalInfoDialog=this.dialog.open(Ut,{data:ts,maxWidth:"480px",panelClass:"mobile-dialog"}),this.setOpenLayersModals(i,e.layerId,this.generalInfoDialog.id,e.pk_value?.toString(),e.geomFeature),this.generalInfoDialog.afterOpened().pipe(P(1)).subscribe(c=>{var m=this.getOpenedModalId(this.generalInfoDialog?.id);m&&this.modalToTop(m)})},100);else{var l=this.getOpenedModalId(a);setTimeout(()=>{l&&(this.triggerShake_beta(l),this.modalToTop(l))},100)}}openedLayersModalsControl={info:{},search:{},filter:{},edit:{}};setOpenLayersModals(e,t,i,n,s){e=="info"||e=="edit"?Object.keys(this.openedLayersModalsControl[e]).includes(t.toString())?this.openedLayersModalsControl[e][t].push({idFeature:n,geomFeature:s,idModal:i}):this.openedLayersModalsControl[e][t]=[{idFeature:n,geomFeature:s,idModal:i}]:this.openedLayersModalsControl[e][t]={idModal:i}}setCloseLayersModals(e,t,i){e=="info"||e=="edit"?Object.keys(this.openedLayersModalsControl[e]).includes(t.toString())&&(this.openedLayersModalsControl[e][t]=this.openedLayersModalsControl[e][t].filter(n=>n.idFeature!=i),this.openedLayersModalsControl[e][t].length==0&&delete this.openedLayersModalsControl[e][t]):delete this.openedLayersModalsControl[e][t]}modalAlreadyOpended(e,t,i){try{var n=this.openedLayersModalsControl[e][t]}catch{return!1}if(n)if(Array.isArray(n))if(Array.isArray(n)){var s=n.filter(r=>r.idFeature==i)[0];return s?s.idModal:!1}else return console.log("Aten\xE7\xE3o aqui!"),!1;else return n.idModal;else return!1}getOpenedModalId(e){let t=document.getElementsByClassName("cdk-global-overlay-wrapper");var i;for(let s=0;s<t.length;++s){let r=t[s];r.children;let a=r.children.item(0)?.children;var n=Array.from(a);if(i=n.filter(l=>l.id==e)[0],i)return i}return!1}modalToTop(e){var i=Array.from(document.getElementsByClassName("cdk-global-overlay-wrapper")).filter(r=>Array.from(r.children).some(a=>Array.from(a.classList).includes("isfeModal")));this.clearHighligthAllFeature("higthlihtInfo");for(let r=0;r<i.length;++r){let a=i[r];var n=a.getElementsByClassName("modal-header")[0];if(this.renderer.removeClass(n,"modal-header-focus"),a.contains(e)){var s=e.getElementsByClassName("modal-header")[0];this.renderer.addClass(s,"modal-header-focus"),this.highligthFeatureFromModal(a.children[0].children[1].id);let c=a.parentNode?.lastChild;c!=a&&c?.parentNode?.insertBefore(a,c.nextSibling)}}}chooseGeomToHighlight(e,t){return e.getGeometry()instanceof xt||e.getGeometry()instanceof kt?t.polygon:e.getGeometry()instanceof Rt||e.getGeometry()instanceof It?t.line:t.point}highligthFeature(e,t){}clearHighligthFeature(e,t){}clearHighligthAllFeature(e){}highligthFeatureFromModal(e){var t;for(let n of Object.keys(this.openedLayersModalsControl.info)){var i=this.openedLayersModalsControl.info[n].filter(s=>s.idModal==e);if(i.length>0){var t=i[0].geomFeature;this.highligthFeature(t,"higthlihtInfo");break}}for(let n of Object.keys(this.openedLayersModalsControl.edit)){var i=this.openedLayersModalsControl.edit[n].filter(r=>r.idModal==e);if(i.length>0){var t=i[0].geomFeature;this.highligthFeature(t,"higthlihtInfo");break}}}triggerShake_beta(e){this.renderer.addClass(e,"shake"),setTimeout(()=>{this.renderer.removeClass(e,"shake")},300)}dialogPositionGeneralInfo={top:70,left:200};updatePositionModal(e,t){e.top=t.top,e.left=t.left,window.innerWidth-e.left<450&&(e.left=window.innerWidth-450),window.innerHeight-e.top<100&&(e.top=window.innerHeight-100),e.top<0&&(e.top=20),e.left<0&&(e.left=20)}changeTileSource(e){e=="mapa"?(this.selectedTileSource=this.layersService.tileSources[0],this.tileLayer.setSource(this.layersService.tileSources[0].getSource())):(this.selectedTileSource=this.layersService.tileSources[1],this.tileLayer.setSource(this.layersService.tileSources[1].getSource()))}static \u0275fac=function(t){return new(t||o)(B(H),B(tt),B(Yt),B($t),B(Ve),B(Xt))};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})};export{ts as a,V as b,tt as c,ol as d,Ut as e,Gt as f,$t as g,Xt as h,Fe as i};
